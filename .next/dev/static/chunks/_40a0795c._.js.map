{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/data/airport-data.json"],"sourcesContent":["{\"airport\":{\"name\":\"Aéroport International Gnassingbé Eyadéma\",\"code\":\"LFW\",\"city\":\"Lomé\",\"country\":\"Togo\",\"coordinates\":[1.2549,6.1659],\"capacity\":\"2 000 000 passagers/an\",\"hub\":\"ASKY Airlines\",\"distance_city\":\"6.8 km du centre-ville\"},\"locations\":[{\"id\":\"gate-a1\",\"name\":\"Porte A1\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253568,6.170194],\"description\":\"Porte d'embarquement A1 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-a2\",\"name\":\"Porte A2\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253185,6.169748],\"description\":\"Porte d'embarquement A2 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-a3\",\"name\":\"Porte A3\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.252825,6.169437],\"description\":\"Porte d'embarquement A3 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-b1\",\"name\":\"Porte B1\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.254069,6.171084],\"description\":\"Porte d'embarquement B1 - Vols régionaux\",\"status\":\"open\"},{\"id\":\"gate-b2\",\"name\":\"Porte B2\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253923,6.170668],\"description\":\"Porte d'embarquement B2 - Vols régionaux\",\"status\":\"open\"},{\"id\":\"checkin-economy-1\",\"name\":\"Enregistrement Zone A\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.253038,6.170017],\"description\":\"Comptoirs 1-20 - Classe Économique\",\"status\":\"open\",\"accessibleTo\":[\"economy\"]},{\"id\":\"checkin-economy-2\",\"name\":\"Enregistrement Zone B\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.253899,6.170813],\"description\":\"Comptoirs 21-40 - Classe Économique\",\"status\":\"open\",\"accessibleTo\":[\"economy\"]},{\"id\":\"checkin-business\",\"name\":\"Enregistrement Business\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.252822,6.169666],\"description\":\"Comptoirs Business & Première Classe\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"security-main\",\"name\":\"Contrôle de Sécurité Principal\",\"type\":\"security\",\"floor\":0,\"coordinates\":[1.253083,6.172066],\"description\":\"Point de contrôle sécurité et passeport\",\"status\":\"busy\"},{\"id\":\"security-fast\",\"name\":\"Contrôle Fast Track\",\"type\":\"security\",\"floor\":0,\"coordinates\":[1.253317,6.170509],\"description\":\"Voie rapide Business/Première Classe\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"toilet-arrival\",\"name\":\"Toilettes Zone Arrivées\",\"type\":\"toilet\",\"floor\":0,\"coordinates\":[1.253572,6.170538],\"description\":\"Toilettes accessibles PMR\",\"status\":\"open\"},{\"id\":\"toilet-checkin\",\"name\":\"Toilettes Zone Enregistrement\",\"type\":\"toilet\",\"floor\":0,\"coordinates\":[1.253357,6.170299],\"description\":\"Toilettes accessibles PMR\",\"status\":\"open\"},{\"id\":\"toilet-gates-a\",\"name\":\"Toilettes Portes A\",\"type\":\"toilet\",\"floor\":1,\"coordinates\":[1.253572,6.170538],\"description\":\"Toilettes zone internationale\",\"status\":\"open\"},{\"id\":\"toilet-gates-b\",\"name\":\"Toilettes Portes B\",\"type\":\"toilet\",\"floor\":1,\"coordinates\":[1.253357,6.170299],\"description\":\"Toilettes zone domestique\",\"status\":\"open\"},{\"id\":\"restaurant-maquis\",\"name\":\"Le Maquis de l'Aéroport\",\"type\":\"restaurant\",\"floor\":0,\"coordinates\":[1.252739,6.170065],\"description\":\"Cuisine togolaise authentique - Fufu, Akpan, Akoumé\",\"status\":\"open\",\"hours\":\"6h - 22h\"},{\"id\":\"restaurant-teranga\",\"name\":\"Restaurant Teranga\",\"type\":\"restaurant\",\"floor\":1,\"coordinates\":[1.252739,6.170065],\"description\":\"Cuisine africaine et internationale\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"cafe-express\",\"name\":\"Café Express\",\"type\":\"restaurant\",\"floor\":1,\"coordinates\":[1.252739,6.170065],\"description\":\"Café, viennoiseries, sandwichs rapides\",\"status\":\"open\",\"hours\":\"4h30 - 23h30\"},{\"id\":\"shop-dutyfree\",\"name\":\"Duty Free Lomé\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.25217,6.169382],\"description\":\"Parfums, alcools, tabac, cosmétiques hors taxes\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"shop-artisanat\",\"name\":\"Artisanat Togolais\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.251705,6.169352],\"description\":\"Tissus batik, sculptures, bijoux locaux, souvenirs\",\"status\":\"open\",\"hours\":\"6h - 22h\"},{\"id\":\"shop-presse\",\"name\":\"Relay Presse\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.252265,6.169839],\"description\":\"Presse internationale, livres, snacks\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"info-main\",\"name\":\"Information Principale\",\"type\":\"information\",\"floor\":0,\"coordinates\":[1.253386,6.17088],\"description\":\"Renseignements, objets trouvés, assistance\",\"status\":\"open\"},{\"id\":\"info-gates\",\"name\":\"Information Zone Embarquement\",\"type\":\"information\",\"floor\":1,\"coordinates\":[1.252895,6.170068],\"description\":\"Informations vols et assistance embarquement\",\"status\":\"open\"},{\"id\":\"lounge-asky\",\"name\":\"Salon VIP ASKY Airlines\",\"type\":\"lounge\",\"floor\":1,\"coordinates\":[1.252755,6.170232],\"description\":\"Salon VIP avec restauration, Wi-Fi, douches\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"lounge-business\",\"name\":\"Salon Business\",\"type\":\"lounge\",\"floor\":1,\"coordinates\":[1.253317,6.170509],\"description\":\"Salon Business avec bar et restauration\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]}],\"services\":[{\"id\":\"service-prmassist\",\"name\":\"Assistance Passagers à Mobilité Réduite\",\"category\":\"assistance\",\"description\":\"Accompagnement personnalisé, fauteuils roulants, assistance embarquement/débarquement\",\"location\":\"info-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 55\",\"icon\":\"accessibility\",\"free\":true},{\"id\":\"service-medical\",\"name\":\"Assistance Médicale d'Urgence\",\"category\":\"medical\",\"description\":\"Infirmerie avec personnel qualifié, premiers secours, défibrillateur\",\"location\":\"medical-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 56\",\"icon\":\"cross\",\"free\":true},{\"id\":\"service-lostfound\",\"name\":\"Objets Trouvés\",\"category\":\"lost_found\",\"description\":\"Déclaration et récupération d'objets perdus dans l'enceinte de l'aéroport\",\"location\":\"info-main\",\"hours\":\"6h - 23h\",\"contact\":\"+228 22 23 44 57\",\"icon\":\"briefcase\",\"free\":true},{\"id\":\"service-flightinfo\",\"name\":\"Information Vols en Temps Réel\",\"category\":\"information\",\"description\":\"Horaires, retards, annulations, changements de porte\",\"location\":\"info-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 58\",\"icon\":\"info\",\"free\":true},{\"id\":\"service-customs\",\"name\":\"Services Douaniers\",\"category\":\"customs\",\"description\":\"Déclarations douanières, contrôles, informations réglementaires\",\"location\":\"customs-arrival\",\"hours\":\"Selon horaires des vols\",\"contact\":\"+228 22 23 44 59\",\"icon\":\"shield\",\"free\":true},{\"id\":\"service-wifi\",\"name\":\"Wi-Fi Gratuit\",\"category\":\"connectivity\",\"description\":\"Accès Internet sans fil gratuit dans tout l'aéroport\",\"location\":\"Partout\",\"hours\":\"24/7\",\"network\":\"Aeroport_LFW_Free\",\"icon\":\"wifi\",\"free\":true},{\"id\":\"service-porter\",\"name\":\"Porteurs de Bagages\",\"category\":\"assistance\",\"description\":\"Aide au transport des bagages\",\"location\":\"entrance-main\",\"hours\":\"5h - 23h\",\"icon\":\"luggage\",\"free\":false,\"pricing\":\"2000-5000 CFA selon distance\"},{\"id\":\"service-vip\",\"name\":\"Service VIP & Meet & Greet\",\"category\":\"premium\",\"description\":\"Accueil personnalisé, assistance formalités, salon VIP, voie rapide\",\"location\":\"entrance-vip\",\"hours\":\"24/7 (sur réservation)\",\"contact\":\"+228 22 23 44 60\",\"icon\":\"star\",\"free\":false,\"pricing\":\"À partir de 50 000 CFA\"}],\"floors\":[{\"level\":0,\"name\":\"Rez-de-chaussée - Arrivées & Départs\",\"description\":\"Zone publique : Enregistrement, Bagages, Services\",\"bounds\":[[1.251,6.163],[1.2595,6.169]]},{\"level\":1,\"name\":\"Étage 1 - Zone d'Embarquement\",\"description\":\"Zone sécurisée : Portes d'embarquement, Restaurants, Boutiques\",\"bounds\":[[1.255,6.166],[1.2595,6.169]]}],\"airlines\":[{\"code\":\"KP\",\"name\":\"ASKY Airlines\",\"type\":\"hub\",\"destinations\":[\"Dakar\",\"Abidjan\",\"Ouagadougou\",\"Niamey\",\"Cotonou\",\"Accra\",\"Lagos\",\"Libreville\"]},{\"code\":\"AF\",\"name\":\"Air France\",\"type\":\"international\",\"destinations\":[\"Paris CDG\"]},{\"code\":\"SN\",\"name\":\"Brussels Airlines\",\"type\":\"international\",\"destinations\":[\"Bruxelles\"]},{\"code\":\"ET\",\"name\":\"Ethiopian Airlines\",\"type\":\"international\",\"destinations\":[\"Addis-Abeba\"]},{\"code\":\"TK\",\"name\":\"Turkish Airlines\",\"type\":\"international\",\"destinations\":[\"Istanbul\"]},{\"code\":\"AT\",\"name\":\"Royal Air Maroc\",\"type\":\"international\",\"destinations\":[\"Casablanca\"]},{\"code\":\"EK\",\"name\":\"Emirates\",\"type\":\"international\",\"destinations\":[\"Dubaï\"]},{\"code\":\"HF\",\"name\":\"Air Côte d'Ivoire\",\"type\":\"regional\",\"destinations\":[\"Abidjan\",\"Dakar\"]}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 3, "column": 8266}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Nouveau%20dossier/Projet/Funny_tps/ANAC/safetraveler/components/map/EnhancedAirportMap.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport { Location, LocationType } from \"@/lib/types\";\r\nimport { locationColors as themeLocationColors, theme } from \"@/lib/config/theme\";\r\n\r\ninterface EnhancedAirportMapProps {\r\n  locations: Location[];\r\n  selectedLocation?: string;\r\n  onLocationSelect?: (locationId: string) => void;\r\n  showRoute?: [number, number][];\r\n  currentFloor?: number;\r\n}\r\n\r\n// Use location colors from theme\r\nconst locationColors = themeLocationColors;\r\n\r\nexport default function EnhancedAirportMap({\r\n  locations,\r\n  selectedLocation,\r\n  onLocationSelect,\r\n  showRoute,\r\n  currentFloor = 0,\r\n}: EnhancedAirportMapProps) {\r\n  const mapContainer = useRef<HTMLDivElement>(null);\r\n  const map = useRef<mapboxgl.Map | null>(null);\r\n  const markers = useRef<{ [key: string]: mapboxgl.Marker }>({});\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const imageCache = useRef<Map<string, HTMLImageElement>>(new Map());\r\n\r\n  useEffect(() => {\r\n    if (!mapContainer.current || map.current) return;\r\n\r\n    const token = process.env.NEXT_PUBLIC_MAPBOX_TOKEN;\r\n    if (!token) {\r\n      console.error(\"Mapbox token is missing\");\r\n      return;\r\n    }\r\n\r\n    mapboxgl.accessToken = token;\r\n\r\n    // Create map with Streets style for Gnassingbé Eyadéma Airport (LFW)\r\n    // Default center on check-in/baggage drop area\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: \"mapbox://styles/mapbox/streets-v12\", // Streets style for detailed street map\r\n      center: [1.253253, 6.170165], // Check-in/Baggage drop area coordinates\r\n      zoom: 16.5, // Closer zoom to see check-in area details\r\n      pitch: 0,\r\n      bearing: 0,\r\n      attributionControl: true, // Show Mapbox attribution\r\n      minZoom: 11, // Allow zooming out to see surrounding area\r\n      maxZoom: 20, // Allow detailed zoom\r\n    });\r\n\r\n    // Add controls\r\n    map.current.addControl(\r\n      new mapboxgl.NavigationControl({\r\n        showCompass: true,\r\n        showZoom: true,\r\n        visualizePitch: false,\r\n      }),\r\n      \"top-right\"\r\n    );\r\n\r\n    map.current.addControl(\r\n      new mapboxgl.GeolocateControl({\r\n        positionOptions: {\r\n          enableHighAccuracy: true,\r\n        },\r\n        trackUserLocation: true,\r\n        showUserHeading: true,\r\n        showUserLocation: true,\r\n      }),\r\n      \"top-right\"\r\n    );\r\n\r\n    map.current.on(\"load\", () => {\r\n      setMapLoaded(true);\r\n    });\r\n\r\n    return () => {\r\n      if (map.current) {\r\n        map.current.remove();\r\n        map.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Create SVG image for marker\r\n  const createMarkerImage = (\r\n    color: string,\r\n    initial: string,\r\n    isSelected: boolean\r\n  ): Promise<HTMLImageElement> => {\r\n    return new Promise((resolve) => {\r\n      const imageId = `${color}-${initial}-${isSelected}`;\r\n      \r\n      // Always create new image to ensure it's up to date\r\n      const pinHeadSize = isSelected ? 28 : 24;\r\n      const pinPointSize = 12;\r\n      const totalHeight = pinHeadSize + pinPointSize;\r\n      const totalWidth = pinHeadSize;\r\n\r\n      const svg = `\r\n        <svg width=\"${totalWidth}\" height=\"${totalHeight}\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <defs>\r\n            <filter id=\"shadow-${imageId.replace(/[^a-zA-Z0-9]/g, '_')}\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\r\n              <feDropShadow dx=\"0\" dy=\"${isSelected ? '2' : '1'}\" stdDeviation=\"${isSelected ? '2' : '1.5'}\" flood-opacity=\"0.3\"/>\r\n            </filter>\r\n          </defs>\r\n          <g filter=\"url(#shadow-${imageId.replace(/[^a-zA-Z0-9]/g, '_')})\">\r\n            <circle cx=\"${totalWidth / 2}\" cy=\"${pinHeadSize / 2}\" r=\"${pinHeadSize / 2 - 1}\" fill=\"${color}\" stroke=\"${isSelected ? '#fff' : 'rgba(255,255,255,0.9)'}\" stroke-width=\"2\"/>\r\n            <path d=\"M ${totalWidth / 2 - pinPointSize / 2} ${pinHeadSize} L ${totalWidth / 2} ${totalHeight} L ${totalWidth / 2 + pinPointSize / 2} ${pinHeadSize} Z\" fill=\"${color}\"/>\r\n            <text x=\"${totalWidth / 2}\" y=\"${pinHeadSize / 2}\" font-family=\"system-ui, -apple-system, sans-serif\" font-size=\"${isSelected ? '14' : '12'}\" font-weight=\"bold\" fill=\"#fff\" text-anchor=\"middle\" dominant-baseline=\"central\">${initial}</text>\r\n          </g>\r\n        </svg>\r\n      `;\r\n\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        imageCache.current.set(imageId, img);\r\n        resolve(img);\r\n      };\r\n      img.src = `data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svg)))}`;\r\n    });\r\n  };\r\n\r\n  // Add enhanced markers using Mapbox symbols (fixed size on zoom)\r\n  useEffect(() => {\r\n    if (!map.current || !mapLoaded) return;\r\n\r\n    // Remove existing markers and layers\r\n    Object.values(markers.current).forEach((marker) => marker.remove());\r\n    markers.current = {};\r\n\r\n    const sourceId = \"locations-source\";\r\n    const layerId = \"locations-layer\";\r\n\r\n    // Remove existing source and layer if they exist\r\n    if (map.current.getLayer(layerId)) {\r\n      map.current.removeLayer(layerId);\r\n    }\r\n    if (map.current.getSource(sourceId)) {\r\n      map.current.removeSource(sourceId);\r\n    }\r\n\r\n    const floorLocations = locations.filter((loc) => loc.floor === currentFloor);\r\n\r\n    // Create GeoJSON features\r\n    const features = floorLocations.map((location) => ({\r\n      type: \"Feature\" as const,\r\n      geometry: {\r\n        type: \"Point\" as const,\r\n        coordinates: location.coordinates,\r\n      },\r\n      properties: {\r\n        id: location.id,\r\n        name: location.name,\r\n        type: location.type,\r\n        description: location.description || \"\",\r\n        status: location.status || \"\",\r\n        color: locationColors[location.type] || \"#757575\",\r\n        initial: getLocationInitial(location.type),\r\n        isSelected: selectedLocation === location.id,\r\n      },\r\n    }));\r\n\r\n    // Add source\r\n    map.current.addSource(sourceId, {\r\n      type: \"geojson\",\r\n      data: {\r\n        type: \"FeatureCollection\",\r\n        features,\r\n      },\r\n    });\r\n\r\n    // Load images and add layer\r\n    const loadImagesAndAddLayer = async () => {\r\n      if (!map.current) return;\r\n\r\n      const uniqueMarkers = new Set<string>();\r\n      floorLocations.forEach((location) => {\r\n        const color = locationColors[location.type] || \"#757575\";\r\n        const initial = getLocationInitial(location.type);\r\n        const isSelected = selectedLocation === location.id;\r\n        uniqueMarkers.add(`${color}-${initial}-${isSelected}`);\r\n      });\r\n\r\n      // Load all unique marker images\r\n      await Promise.all(\r\n        Array.from(uniqueMarkers).map(async (key) => {\r\n          if (!map.current) return;\r\n          // Parse key: format is \"color-initial-selected\"\r\n          // Color may contain dashes, so we need to split from the end\r\n          const parts = key.split(\"-\");\r\n          const selected = parts[parts.length - 1];\r\n          const initial = parts[parts.length - 2];\r\n          const color = parts.slice(0, -2).join(\"-\");\r\n          const isSelected = selected === \"true\";\r\n          const imageId = `marker-${key}`;\r\n          const img = await createMarkerImage(color, initial, isSelected);\r\n          \r\n          if (!map.current.hasImage(imageId)) {\r\n            map.current.addImage(imageId, img);\r\n          }\r\n        })\r\n      );\r\n\r\n      if (!map.current) return;\r\n\r\n      // Add layer with fixed icon size (doesn't scale with zoom)\r\n      if (!map.current.getLayer(layerId)) {\r\n        map.current.addLayer({\r\n          id: layerId,\r\n          type: \"symbol\",\r\n          source: sourceId,\r\n          layout: {\r\n            \"icon-image\": [\r\n              \"case\",\r\n              [\"get\", \"isSelected\"],\r\n              [\r\n                \"concat\",\r\n                \"marker-\",\r\n                [\"get\", \"color\"],\r\n                \"-\",\r\n                [\"get\", \"initial\"],\r\n                \"-true\"\r\n              ],\r\n              [\r\n                \"concat\",\r\n                \"marker-\",\r\n                [\"get\", \"color\"],\r\n                \"-\",\r\n                [\"get\", \"initial\"],\r\n                \"-false\"\r\n              ]\r\n            ],\r\n            \"icon-size\": 1, // Fixed size - doesn't scale with zoom\r\n            \"icon-anchor\": \"bottom\",\r\n            \"icon-allow-overlap\": true,\r\n            \"icon-ignore-placement\": true,\r\n          },\r\n        });\r\n      }\r\n\r\n      // Define event handlers\r\n      const clickHandler = (e: mapboxgl.MapLayerMouseEvent) => {\r\n        if (!e.features || !e.features[0] || !map.current) return;\r\n\r\n        const props = e.features[0].properties;\r\n        if (!props) return;\r\n\r\n        const color = props.color as string;\r\n        const coordinates = (e.features[0].geometry as any).coordinates.slice();\r\n        const location = floorLocations.find((loc) => loc.id === props.id);\r\n\r\n        if (!location) return;\r\n\r\n        if (onLocationSelect) {\r\n          onLocationSelect(location.id);\r\n        }\r\n\r\n        const popup = new mapboxgl.Popup({\r\n          offset: 25,\r\n          closeButton: false,\r\n          maxWidth: \"300px\",\r\n        })\r\n          .setLngLat(coordinates as [number, number])\r\n          .setHTML(`\r\n            <div style=\"padding: 12px;\">\r\n              <div style=\"display: flex; align-items: center; margin-bottom: 8px;\">\r\n                <div style=\"width: 12px; height: 12px; border-radius: 50%; background-color: ${color}; border: 2px solid ${color}; margin-right: 12px; flex-shrink: 0;\"></div>\r\n                <div>\r\n                  <h3 style=\"font-weight: 600; font-size: 16px; margin: 0; color: #1f2937;\">${location.name}</h3>\r\n                  <p style=\"font-size: 12px; color: #6b7280; margin: 0;\">${getLocationTypeLabel(location.type)}</p>\r\n                </div>\r\n              </div>\r\n              ${location.description ? `<p style=\"font-size: 14px; color: #4b5563; margin: 0;\">${location.description}</p>` : \"\"}\r\n              ${location.status ? `<div style=\"margin-top: 8px; padding: 4px 8px; background-color: ${getStatusColor(location.status)}20; color: ${getStatusColor(location.status)}; border-radius: 4px; font-size: 12px; display: inline-block; font-weight: 500;\">${getStatusLabel(location.status)}</div>` : \"\"}\r\n            </div>\r\n          `)\r\n          .addTo(map.current);\r\n      };\r\n\r\n      const mouseEnterHandler = () => {\r\n        if (map.current) {\r\n          map.current.getCanvas().style.cursor = \"pointer\";\r\n        }\r\n      };\r\n\r\n      const mouseLeaveHandler = () => {\r\n        if (map.current) {\r\n          map.current.getCanvas().style.cursor = \"\";\r\n        }\r\n      };\r\n\r\n      // Add event handlers\r\n      map.current.on(\"click\", layerId, clickHandler);\r\n      map.current.on(\"mouseenter\", layerId, mouseEnterHandler);\r\n      map.current.on(\"mouseleave\", layerId, mouseLeaveHandler);\r\n\r\n      // Store handlers for cleanup\r\n      (map.current as any)._markerHandlers = {\r\n        click: clickHandler,\r\n        mouseenter: mouseEnterHandler,\r\n        mouseleave: mouseLeaveHandler,\r\n      };\r\n    };\r\n\r\n    loadImagesAndAddLayer();\r\n\r\n    return () => {\r\n      if (map.current) {\r\n        const handlers = (map.current as any)._markerHandlers;\r\n        if (handlers) {\r\n          map.current.off(\"click\", layerId, handlers.click);\r\n          map.current.off(\"mouseenter\", layerId, handlers.mouseenter);\r\n          map.current.off(\"mouseleave\", layerId, handlers.mouseleave);\r\n          delete (map.current as any)._markerHandlers;\r\n        }\r\n        if (map.current.getLayer(layerId)) {\r\n          map.current.removeLayer(layerId);\r\n        }\r\n        if (map.current.getSource(sourceId)) {\r\n          map.current.removeSource(sourceId);\r\n        }\r\n      }\r\n    };\r\n  }, [locations, mapLoaded, currentFloor, selectedLocation, onLocationSelect]);\r\n\r\n  // Draw route\r\n  useEffect(() => {\r\n    if (!map.current || !mapLoaded || !showRoute) return;\r\n\r\n    const routeId = \"route\";\r\n\r\n    if (map.current.getSource(routeId)) {\r\n      map.current.removeLayer(routeId);\r\n      map.current.removeSource(routeId);\r\n    }\r\n\r\n    map.current.addSource(routeId, {\r\n      type: \"geojson\",\r\n      data: {\r\n        type: \"Feature\",\r\n        properties: {},\r\n        geometry: {\r\n          type: \"LineString\",\r\n          coordinates: showRoute,\r\n        },\r\n      },\r\n    });\r\n\r\n    map.current.addLayer({\r\n      id: routeId,\r\n      type: \"line\",\r\n      source: routeId,\r\n      layout: {\r\n        \"line-join\": \"round\",\r\n        \"line-cap\": \"round\",\r\n      },\r\n      paint: {\r\n        \"line-color\": theme.colors.accent.main, // Yellow accent for routes\r\n        \"line-width\": [\r\n          \"interpolate\",\r\n          [\"linear\"],\r\n          [\"zoom\"],\r\n          10, 4,\r\n          15, 6,\r\n          18, 8\r\n        ],\r\n        \"line-opacity\": 0.9,\r\n      },\r\n    });\r\n\r\n    // Add a subtle outline for better visibility\r\n    map.current.addLayer({\r\n      id: `${routeId}-outline`,\r\n      type: \"line\",\r\n      source: routeId,\r\n      layout: {\r\n        \"line-join\": \"round\",\r\n        \"line-cap\": \"round\",\r\n      },\r\n      paint: {\r\n        \"line-color\": \"#ffffff\",\r\n        \"line-width\": [\r\n          \"interpolate\",\r\n          [\"linear\"],\r\n          [\"zoom\"],\r\n          10, 6,\r\n          15, 8,\r\n          18, 10\r\n        ],\r\n        \"line-opacity\": 0.5,\r\n      },\r\n    }, routeId); // Insert before the main route layer\r\n\r\n    // Fit map to route bounds with padding\r\n    if (showRoute.length > 0) {\r\n      const bounds = showRoute.reduce(\r\n        (bounds, coord) => bounds.extend(coord as [number, number]),\r\n        new mapboxgl.LngLatBounds(showRoute[0] as [number, number], showRoute[0] as [number, number])\r\n      );\r\n\r\n      map.current.fitBounds(bounds, {\r\n        padding: { top: 100, bottom: 100, left: 100, right: 100 },\r\n        maxZoom: 18,\r\n        duration: 1000,\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (map.current) {\r\n        if (map.current.getLayer(`${routeId}-outline`)) {\r\n          map.current.removeLayer(`${routeId}-outline`);\r\n        }\r\n        if (map.current.getLayer(routeId)) {\r\n          map.current.removeLayer(routeId);\r\n        }\r\n        if (map.current.getSource(routeId)) {\r\n          map.current.removeSource(routeId);\r\n        }\r\n      }\r\n    };\r\n  }, [showRoute, mapLoaded]);\r\n\r\n  return <div ref={mapContainer} className=\"w-full h-full rounded-lg\" />;\r\n}\r\n\r\nfunction getLocationInitial(type: LocationType): string {\r\n  const initials: Record<LocationType, string> = {\r\n    gate: \"G\",\r\n    checkin: \"C\",\r\n    security: \"S\",\r\n    customs: \"D\",\r\n    toilet: \"T\",\r\n    restaurant: \"R\",\r\n    shop: \"B\",\r\n    information: \"i\",\r\n    exit: \"E\",\r\n    entrance: \"E\",\r\n    lounge: \"L\",\r\n    baggage: \"B\",\r\n    parking: \"P\",\r\n    medical: \"+\",\r\n    prayer: \"P\",\r\n    smoking: \"S\",\r\n    atm: \"$\",\r\n    wifi: \"W\",\r\n    charging: \"⚡\", // Using lightning symbol as it's a standard Unicode character, not an emoji\r\n  };\r\n  return initials[type] || \"?\";\r\n}\r\n\r\nfunction getLocationTypeLabel(type: LocationType): string {\r\n  const labels: Record<LocationType, string> = {\r\n    gate: \"Porte d'embarquement\",\r\n    checkin: \"Enregistrement\",\r\n    security: \"Sécurité\",\r\n    customs: \"Douane\",\r\n    toilet: \"Toilettes\",\r\n    restaurant: \"Restauration\",\r\n    shop: \"Boutique\",\r\n    information: \"Information\",\r\n    exit: \"Sortie\",\r\n    entrance: \"Entrée\",\r\n    lounge: \"Salon\",\r\n    baggage: \"Bagages\",\r\n    parking: \"Parking\",\r\n    medical: \"Médical\",\r\n    prayer: \"Salle de prière\",\r\n    smoking: \"Fumoir\",\r\n    atm: \"Distributeur\",\r\n    wifi: \"WiFi\",\r\n    charging: \"Recharge\",\r\n  };\r\n  return labels[type] || type;\r\n}\r\n\r\nfunction getStatusColor(status: string): string {\r\n  const colors: Record<string, string> = {\r\n    open: theme.colors.success.main,\r\n    closed: theme.colors.error.main,\r\n    busy: theme.colors.warning.main,\r\n  };\r\n  return colors[status] || theme.colors.gray[500];\r\n}\r\n\r\nfunction getStatusLabel(status: string): string {\r\n  const labels: Record<string, string> = {\r\n    open: \"Ouvert\",\r\n    closed: \"Fermé\",\r\n    busy: \"Affluence\",\r\n  };\r\n  return labels[status] || status;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///C:/Nouveau%20dossier/Projet/Funny_tps/ANAC/safetraveler/lib/utils/mapbox-directions.ts"],"sourcesContent":["/**\r\n * Mapbox Directions API utility\r\n * Calculates routes between two points using Mapbox Directions API\r\n */\r\n\r\nexport interface MapboxDirectionsResponse {\r\n  routes: Array<{\r\n    geometry: {\r\n      coordinates: [number, number][];\r\n      type: string;\r\n    };\r\n    distance: number;\r\n    duration: number;\r\n    weight?: number;\r\n    weight_name?: string;\r\n    legs: Array<{\r\n      steps: Array<{\r\n        maneuver: {\r\n          type: string;\r\n          instruction: string;\r\n          location: [number, number];\r\n          modifier?: string;\r\n          bearing_after?: number;\r\n          bearing_before?: number;\r\n        };\r\n        distance: number;\r\n        duration: number;\r\n        geometry: {\r\n          coordinates: [number, number][];\r\n        };\r\n        mode?: string;\r\n        driving_side?: string;\r\n        name?: string;\r\n        ref?: string;\r\n        pronunciation?: string;\r\n        destinations?: string;\r\n        exits?: string;\r\n        rotary_name?: string;\r\n        rotary_pronunciation?: string;\r\n        intersections?: Array<{\r\n          location: [number, number];\r\n          bearings: number[];\r\n          classes?: string[];\r\n          entry: boolean[];\r\n          in?: number;\r\n          out?: number;\r\n          lanes?: Array<{\r\n            indications: string[];\r\n            valid: boolean;\r\n            valid_indication?: string;\r\n          }>;\r\n        }>;\r\n      }>;\r\n      distance: number;\r\n      duration: number;\r\n      summary?: string;\r\n    }>;\r\n  }>;\r\n  waypoints: Array<{\r\n    location: [number, number];\r\n    name?: string;\r\n    hint?: string;\r\n  }>;\r\n  code: string;\r\n  uuid?: string;\r\n}\r\n\r\nexport interface RouteInstructions {\r\n  instruction: string;\r\n  distance: number;\r\n  duration: number;\r\n  coordinates: [number, number][];\r\n  maneuver: string;\r\n}\r\n\r\nexport interface MapboxDirectionsOptions {\r\n  profile?: \"walking\" | \"driving\" | \"cycling\";\r\n  alternatives?: boolean;\r\n  steps?: boolean;\r\n  geometries?: \"geojson\" | \"polyline\" | \"polyline6\";\r\n  overview?: \"full\" | \"simplified\" | \"false\";\r\n  language?: string;\r\n  waypoints?: [number, number][];\r\n  radiuses?: number[];\r\n  bearings?: Array<[number, number]>;\r\n  continue_straight?: boolean;\r\n  annotations?: string[];\r\n  exclude?: string;\r\n  approaches?: string;\r\n  waypoint_names?: string[];\r\n  waypoint_targets?: Array<[number, number]>;\r\n  snapping_include_closures?: boolean;\r\n  snapping_include_ways?: string[];\r\n}\r\n\r\n/**\r\n * Get directions from Mapbox Directions API with advanced options\r\n */\r\nexport async function getMapboxDirections(\r\n  start: [number, number],\r\n  end: [number, number],\r\n  options: MapboxDirectionsOptions = {}\r\n): Promise<MapboxDirectionsResponse | null> {\r\n  const token = process.env.NEXT_PUBLIC_MAPBOX_TOKEN;\r\n  \r\n  if (!token) {\r\n    console.error(\"Mapbox token is missing\");\r\n    return null;\r\n  }\r\n\r\n  const {\r\n    profile = \"walking\",\r\n    alternatives = false,\r\n    steps = true,\r\n    geometries = \"geojson\",\r\n    overview = \"full\",\r\n    language = \"fr\",\r\n    waypoints,\r\n    radiuses,\r\n    bearings,\r\n    continue_straight = false,\r\n    annotations = [\"distance\", \"duration\"],\r\n    exclude,\r\n    approaches,\r\n    waypoint_names,\r\n    waypoint_targets,\r\n  } = options;\r\n\r\n  try {\r\n    // Build coordinates string with waypoints\r\n    let coordinates = `${start[0]},${start[1]}`;\r\n    const validWaypoints: [number, number][] = [];\r\n    \r\n    if (waypoints && Array.isArray(waypoints) && waypoints.length > 0) {\r\n      waypoints.forEach((waypoint) => {\r\n        if (waypoint && Array.isArray(waypoint) && waypoint.length === 2 && \r\n            typeof waypoint[0] === 'number' && typeof waypoint[1] === 'number') {\r\n          validWaypoints.push(waypoint);\r\n          coordinates += `;${waypoint[0]},${waypoint[1]}`;\r\n        }\r\n      });\r\n    }\r\n    coordinates += `;${end[0]},${end[1]}`;\r\n\r\n    // Build query parameters - only include supported parameters\r\n    const params = new URLSearchParams({\r\n      geometries,\r\n      steps: steps.toString(),\r\n      overview,\r\n      language,\r\n      alternatives: alternatives.toString(),\r\n      continue_straight: continue_straight.toString(),\r\n    });\r\n\r\n    // Add annotations only if provided and valid\r\n    if (annotations && annotations.length > 0) {\r\n      // Filter valid annotation types\r\n      const validAnnotations = annotations.filter(a => \r\n        [\"distance\", \"duration\", \"speed\", \"congestion\", \"congestion_numeric\"].includes(a)\r\n      );\r\n      if (validAnnotations.length > 0) {\r\n        params.append(\"annotations\", validAnnotations.join(\",\"));\r\n      }\r\n    }\r\n\r\n    // Add optional parameters only if they have valid values\r\n    const numCoords = 2 + validWaypoints.length;\r\n    \r\n    if (radiuses && Array.isArray(radiuses) && radiuses.length > 0) {\r\n      // Ensure we have the right number of radiuses (one per coordinate)\r\n      if (radiuses.length === numCoords) {\r\n        params.append(\"radiuses\", radiuses.join(\";\"));\r\n      }\r\n    }\r\n    \r\n    if (bearings && Array.isArray(bearings) && bearings.length > 0) {\r\n      if (bearings.length === numCoords) {\r\n        params.append(\"bearings\", bearings.map(b => `${b[0]},${b[1]}`).join(\";\"));\r\n      }\r\n    }\r\n    \r\n    if (exclude && typeof exclude === 'string') {\r\n      params.append(\"exclude\", exclude);\r\n    }\r\n    \r\n    if (approaches && typeof approaches === 'string') {\r\n      params.append(\"approaches\", approaches);\r\n    }\r\n    \r\n    if (waypoint_names && Array.isArray(waypoint_names) && waypoint_names.length > 0 && waypoint_names.length === validWaypoints.length) {\r\n      params.append(\"waypoint_names\", waypoint_names.join(\";\"));\r\n    }\r\n    \r\n    if (waypoint_targets && Array.isArray(waypoint_targets) && waypoint_targets.length > 0 && waypoint_targets.length === validWaypoints.length) {\r\n      params.append(\"waypoint_targets\", waypoint_targets.map(t => `${t[0]},${t[1]}`).join(\";\"));\r\n    }\r\n\r\n    // Note: snapping_include_closures and snapping_include_ways are not widely supported\r\n    // Removing them to avoid API errors\r\n\r\n    params.append(\"access_token\", token);\r\n\r\n    const url = `https://api.mapbox.com/directions/v5/mapbox/${profile}/${coordinates}?${params.toString()}`;\r\n\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Mapbox Directions API error: ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data as MapboxDirectionsResponse;\r\n  } catch (error) {\r\n    console.error(\"Error fetching directions:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Convert Mapbox Directions response to route path\r\n */\r\nexport function extractRoutePath(directions: MapboxDirectionsResponse): [number, number][] {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  return route.geometry.coordinates as [number, number][];\r\n}\r\n\r\n/**\r\n * Extract turn-by-turn instructions from Mapbox Directions response\r\n */\r\nexport function extractRouteInstructions(directions: MapboxDirectionsResponse): RouteInstructions[] {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  const instructions: RouteInstructions[] = [];\r\n\r\n  route.legs.forEach((leg) => {\r\n    leg.steps.forEach((step) => {\r\n      instructions.push({\r\n        instruction: step.maneuver.instruction,\r\n        distance: step.distance,\r\n        duration: step.duration,\r\n        coordinates: step.geometry.coordinates as [number, number][],\r\n        maneuver: step.maneuver.type,\r\n      });\r\n    });\r\n  });\r\n\r\n  return instructions;\r\n}\r\n\r\n/**\r\n * Get route summary (distance and duration)\r\n */\r\nexport function getRouteSummary(directions: MapboxDirectionsResponse): {\r\n  distance: number;\r\n  duration: number;\r\n  weight?: number;\r\n  weight_name?: string;\r\n} {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return { distance: 0, duration: 0 };\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  return {\r\n    distance: route.distance,\r\n    duration: Math.round(route.duration / 60), // Convert seconds to minutes\r\n    weight: route.weight,\r\n    weight_name: route.weight_name,\r\n  };\r\n}\r\n\r\n/**\r\n * Get alternative routes if available\r\n */\r\nexport function getAlternativeRoutes(directions: MapboxDirectionsResponse): Array<{\r\n  path: [number, number][];\r\n  distance: number;\r\n  duration: number;\r\n}> {\r\n  if (!directions.routes || directions.routes.length <= 1) {\r\n    return [];\r\n  }\r\n\r\n  return directions.routes.slice(1).map((route) => ({\r\n    path: route.geometry.coordinates as [number, number][],\r\n    distance: route.distance,\r\n    duration: Math.round(route.duration / 60),\r\n  }));\r\n}\r\n\r\n/**\r\n * Find intermediate waypoints for better routing in airport context\r\n * This helps route through key areas like security checkpoints, elevators, etc.\r\n */\r\nexport function findIntermediateWaypoints(\r\n  start: [number, number],\r\n  end: [number, number],\r\n  locations: Array<{ coordinates: [number, number]; type: string; floor: number }>,\r\n  currentFloor: number\r\n): [number, number][] {\r\n  const waypoints: Array<{ coordinates: [number, number]; priority: number; distance: number }> = [];\r\n  \r\n  // Filter locations on the same floor\r\n  const floorLocations = locations.filter((loc) => loc.floor === currentFloor);\r\n  \r\n  // Key waypoint types for airport navigation with priorities\r\n  const keyTypes: Record<string, number> = {\r\n    security: 3, // High priority - must pass through\r\n    elevator: 2, // Medium-high priority\r\n    escalator: 2, // Medium-high priority\r\n    information: 1, // Medium priority\r\n    entrance: 1, // Medium priority\r\n    exit: 1, // Medium priority\r\n  };\r\n  \r\n  // Find key locations between start and end\r\n  const startX = start[0];\r\n  const startY = start[1];\r\n  const endX = end[0];\r\n  const endY = end[1];\r\n  \r\n  // Calculate distance from start to end\r\n  const totalDistance = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));\r\n  \r\n  // Find locations that are roughly between start and end\r\n  floorLocations.forEach((loc) => {\r\n    const priority = keyTypes[loc.type];\r\n    if (priority) {\r\n      const locX = loc.coordinates[0];\r\n      const locY = loc.coordinates[1];\r\n      \r\n      // Calculate distance from start\r\n      const distFromStart = Math.sqrt(Math.pow(locX - startX, 2) + Math.pow(locY - startY, 2));\r\n      \r\n      // Check if location is roughly between start and end (within 120% of direct distance)\r\n      const isReasonable = distFromStart <= totalDistance * 1.2;\r\n      \r\n      // Check if location is roughly in the direction of the destination\r\n      const directionToEnd = Math.atan2(endY - startY, endX - startX);\r\n      const directionToLoc = Math.atan2(locY - startY, locX - startX);\r\n      const angleDiff = Math.abs(directionToEnd - directionToLoc);\r\n      const isInDirection = angleDiff < Math.PI / 3; // Within 60 degrees\r\n      \r\n      if (isReasonable && isInDirection) {\r\n        waypoints.push({\r\n          coordinates: loc.coordinates,\r\n          priority,\r\n          distance: distFromStart,\r\n        });\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Sort by priority (higher first), then by distance (closer first)\r\n  waypoints.sort((a, b) => {\r\n    if (b.priority !== a.priority) {\r\n      return b.priority - a.priority;\r\n    }\r\n    return a.distance - b.distance;\r\n  });\r\n  \r\n  // Limit to 2-3 waypoints to avoid too complex routes\r\n  // Only include high priority waypoints if they exist\r\n  const highPriorityWaypoints = waypoints.filter((w) => w.priority >= 2);\r\n  if (highPriorityWaypoints.length > 0) {\r\n    return highPriorityWaypoints.slice(0, 2).map((w) => w.coordinates);\r\n  }\r\n  \r\n  return waypoints.slice(0, 2).map((w) => w.coordinates);\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 750, "column": 0}, "map": {"version":3,"sources":["file:///C:/Nouveau%20dossier/Projet/Funny_tps/ANAC/safetraveler/app/navigation/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { ChevronDown, Loader2, MapPin, Clock, Search, X, Layers, Filter, Navigation, X as XIcon } from \"lucide-react\";\r\nimport { Location, LocationType } from \"@/lib/types\";\r\nimport airportData from \"@/lib/data/airport-data.json\";\r\nimport { theme, locationColors } from \"@/lib/config/theme\";\r\nimport { useLocale } from \"@/lib/context/LocaleContext\";\r\nimport EnhancedAirportMap from \"@/components/map/EnhancedAirportMap\";\r\nimport {\r\n  getMapboxDirections,\r\n  extractRoutePath,\r\n  extractRouteInstructions,\r\n  getRouteSummary,\r\n  getAlternativeRoutes,\r\n  findIntermediateWaypoints,\r\n  RouteInstructions,\r\n} from \"@/lib/utils/mapbox-directions\";\r\n\r\nexport default function NavigationPage() {\r\n  const { t, locale } = useLocale();\r\n  const [locations, setLocations] = useState<Location[]>([]);\r\n  const [floors, setFloors] = useState<{ level: number; name: string }[]>([]);\r\n  const [currentFloor, setCurrentFloor] = useState(0);\r\n  const [startLocation, setStartLocation] = useState<string>(\"\");\r\n  const [endLocation, setEndLocation] = useState<string>(\"\");\r\n  const [route, setRoute] = useState<[number, number][] | undefined>();\r\n  const [selectedLocation, setSelectedLocation] = useState<string | undefined>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [routeInstructions, setRouteInstructions] = useState<RouteInstructions[]>([]);\r\n  const [routeSummary, setRouteSummary] = useState<{ distance: number; duration: number } | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [selectedTypes, setSelectedTypes] = useState<Set<string>>(new Set());\r\n  const [showMobileNav, setShowMobileNav] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLocations(airportData.locations as Location[]);\r\n    setFloors(airportData.floors);\r\n  }, []);\r\n\r\n  // Get only the location types to display in legend\r\n  const legendLocationTypes: LocationType[] = [\r\n    \"gate\",           // Portes\r\n    \"checkin\",        // Enregistrement\r\n    \"security\",       // Sécurité\r\n    \"toilet\",         // Toilettes\r\n    \"restaurant\",     // Restauration\r\n    \"shop\",          // Boutiques\r\n    \"information\",   // Information\r\n    \"lounge\",        // Salons\r\n  ];\r\n\r\n  // Get location types from actual locations (for filtering)\r\n  const locationTypes = Array.from(\r\n    new Set(locations.map((loc) => loc.type))\r\n  ).sort();\r\n\r\n  // Filter locations based on search and type filters\r\n  const filteredLocations = locations.filter((loc) => {\r\n    const matchesSearch =\r\n      loc.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      loc.description?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesType = selectedTypes.size === 0 || selectedTypes.has(loc.type);\r\n    return matchesSearch && matchesType;\r\n  });\r\n\r\n  const toggleType = (type: string) => {\r\n    const newTypes = new Set(selectedTypes);\r\n    if (newTypes.has(type)) {\r\n      newTypes.delete(type);\r\n    } else {\r\n      newTypes.add(type);\r\n    }\r\n    setSelectedTypes(newTypes);\r\n  };\r\n\r\n  const handleCalculateRoute = async () => {\r\n    if (!startLocation || !endLocation) {\r\n      return;\r\n    }\r\n\r\n    const start = locations.find((loc) => loc.id === startLocation);\r\n    const end = locations.find((loc) => loc.id === endLocation);\r\n\r\n    if (!start || !end) return;\r\n\r\n    setIsLoading(true);\r\n    setRoute(undefined);\r\n    setRouteInstructions([]);\r\n    setRouteSummary(null);\r\n\r\n    try {\r\n      // Find intermediate waypoints for better routing in airport context\r\n      const waypoints = findIntermediateWaypoints(\r\n        start.coordinates as [number, number],\r\n        end.coordinates as [number, number],\r\n        locations.map((loc) => ({\r\n          coordinates: loc.coordinates as [number, number],\r\n          type: loc.type,\r\n          floor: loc.floor,\r\n        })),\r\n        start.floor\r\n      );\r\n\r\n      // Use Mapbox Directions API with advanced options for better routing\r\n      const directions = await getMapboxDirections(\r\n        start.coordinates as [number, number],\r\n        end.coordinates as [number, number],\r\n        {\r\n          profile: \"walking\",\r\n          alternatives: true, // Get alternative routes\r\n          steps: true,\r\n          geometries: \"geojson\",\r\n          overview: \"full\", // Full geometry for better visualization\r\n          language: locale === \"ewe\" ? \"en\" : locale, // Mapbox supports fr, en, etc. but not ewe, so use en as fallback\r\n          waypoints: waypoints.length > 0 ? waypoints : undefined, // Only include if we have waypoints\r\n          annotations: [\"distance\", \"duration\"], // Get detailed annotations (removed speed as it may not be supported for walking)\r\n          continue_straight: false, // Allow route optimization\r\n        }\r\n      );\r\n\r\n      if (directions) {\r\n        const routePath = extractRoutePath(directions);\r\n        const instructions = extractRouteInstructions(directions);\r\n        const summary = getRouteSummary(directions);\r\n        const alternatives = getAlternativeRoutes(directions);\r\n\r\n        setRoute(routePath);\r\n        setRouteInstructions(instructions);\r\n        setRouteSummary(summary);\r\n        setCurrentFloor(start.floor);\r\n\r\n        // Log alternative routes for future use\r\n        if (alternatives.length > 0) {\r\n          console.log(`Found ${alternatives.length} alternative route(s)`);\r\n        }\r\n\r\n        // Fit map to route bounds if needed\r\n        if (routePath.length > 0) {\r\n          // The map will automatically fit to the route\r\n        }\r\n      } else {\r\n        // Fallback to simple route if Mapbox API fails\r\n        const simpleRoute: [number, number][] = [\r\n          start.coordinates as [number, number],\r\n          end.coordinates as [number, number],\r\n        ];\r\n        setRoute(simpleRoute);\r\n        setCurrentFloor(start.floor);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error calculating route:\", error);\r\n      // Fallback to simple route\r\n      const startLoc = locations.find((loc) => loc.id === startLocation);\r\n      const endLoc = locations.find((loc) => loc.id === endLocation);\r\n      if (startLoc && endLoc) {\r\n        const simpleRoute: [number, number][] = [\r\n          startLoc.coordinates as [number, number],\r\n          endLoc.coordinates as [number, number],\r\n        ];\r\n        setRoute(simpleRoute);\r\n        setCurrentFloor(startLoc.floor);\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Group locations by type for dropdown\r\n  const groupedLocations = locations.reduce((acc, loc) => {\r\n    if (!acc[loc.type]) {\r\n      acc[loc.type] = [];\r\n    }\r\n    acc[loc.type].push(loc);\r\n    return acc;\r\n  }, {} as Record<string, Location[]>);\r\n\r\n  const locationTypeLabels: Record<string, string> = {\r\n    gate: t(\"map.locationTypes.gate\"),\r\n    checkin: t(\"map.locationTypes.checkin\"),\r\n    security: t(\"map.locationTypes.security\"),\r\n    toilet: t(\"map.locationTypes.toilet\"),\r\n    restaurant: t(\"map.locationTypes.restaurant\"),\r\n    shop: t(\"map.locationTypes.shop\"),\r\n    information: t(\"map.locationTypes.information\"),\r\n    lounge: t(\"map.locationTypes.lounge\"),\r\n  };\r\n\r\n  // Navigation form component (reusable)\r\n  const NavigationForm = () => (\r\n    <div className=\"p-4 md:p-6 space-y-4 md:space-y-6\">\r\n      {/* Title */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1\r\n            className=\"font-bold mb-2\"\r\n            style={{\r\n              fontSize: \"24px\",\r\n              fontWeight: 700,\r\n              color: theme.colors.text.primary,\r\n            }}\r\n          >\r\n            {t(\"navigation.title\")}\r\n          </h1>\r\n          <p\r\n            className=\"text-sm\"\r\n            style={{\r\n              color: theme.colors.text.secondary,\r\n            }}\r\n          >\r\n            {t(\"navigation.calculateItinerary\")}\r\n          </p>\r\n        </div>\r\n        {/* Close button for mobile */}\r\n        <button\r\n          onClick={() => setShowMobileNav(false)}\r\n          className=\"md:hidden p-2 rounded-lg hover:bg-gray-100\"\r\n          style={{ color: theme.colors.text.secondary }}\r\n        >\r\n          <XIcon className=\"w-6 h-6\" />\r\n        </button>\r\n      </div>\r\n\r\n          {/* Starting Point */}\r\n          <div>\r\n            <label\r\n              className=\"block text-sm font-medium mb-2\"\r\n              style={{\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              {t(\"navigation.startingPoint\")}\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={startLocation}\r\n                onChange={(e) => {\r\n                  setStartLocation(e.target.value);\r\n                  setSelectedLocation(e.target.value);\r\n                }}\r\n                className=\"w-full appearance-none rounded-lg border px-4 py-3 pr-10 text-sm transition-all focus:outline-none focus:ring-2\"\r\n                style={{\r\n                  backgroundColor: \"#ffffff\",\r\n                  borderColor: theme.colors.border.main,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n              >\r\n                <option value=\"\">{t(\"navigation.selectPlaceholder\")}</option>\r\n                {Object.entries(groupedLocations).map(([type, locs]) => (\r\n                  <optgroup key={type} label={locationTypeLabels[type] || type}>\r\n                    {locs.map((loc) => (\r\n                      <option key={loc.id} value={loc.id}>\r\n                        {loc.name}\r\n                      </option>\r\n                    ))}\r\n                  </optgroup>\r\n                ))}\r\n              </select>\r\n              <ChevronDown\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none w-5 h-5\"\r\n                style={{ color: theme.colors.text.secondary }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Destination */}\r\n          <div>\r\n            <label\r\n              className=\"block text-sm font-medium mb-2\"\r\n              style={{\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              {t(\"navigation.destination\")}\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={endLocation}\r\n                onChange={(e) => {\r\n                  setEndLocation(e.target.value);\r\n                  setSelectedLocation(e.target.value);\r\n                }}\r\n                className=\"w-full appearance-none rounded-lg border px-4 py-3 pr-10 text-sm transition-all focus:outline-none focus:ring-2\"\r\n                style={{\r\n                  backgroundColor: \"#ffffff\",\r\n                  borderColor: theme.colors.border.main,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n              >\r\n                <option value=\"\">{t(\"navigation.selectPlaceholder\")}</option>\r\n                {Object.entries(groupedLocations).map(([type, locs]) => (\r\n                  <optgroup key={type} label={locationTypeLabels[type] || type}>\r\n                    {locs.map((loc) => (\r\n                      <option key={loc.id} value={loc.id}>\r\n                        {loc.name}\r\n                      </option>\r\n                    ))}\r\n                  </optgroup>\r\n                ))}\r\n              </select>\r\n              <ChevronDown\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none w-5 h-5\"\r\n                style={{ color: theme.colors.text.secondary }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n      {/* Calculate Button */}\r\n      <button\r\n        onClick={() => {\r\n          handleCalculateRoute();\r\n          // Close mobile nav after calculating route\r\n          if (window.innerWidth < 768) {\r\n            setShowMobileNav(false);\r\n          }\r\n        }}\r\n        className=\"w-full rounded-lg font-semibold transition-all py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        style={{\r\n          backgroundColor: startLocation && endLocation ? theme.colors.accent.main : theme.colors.gray[300],\r\n          color: startLocation && endLocation ? theme.colors.accent.contrast : theme.colors.text.primary,\r\n          boxShadow: theme.shadow.sm,\r\n        }}\r\n        disabled={!startLocation || !endLocation || isLoading}\r\n      >\r\n        {isLoading ? (\r\n          <>\r\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n            {t(\"navigation.calculating\")}\r\n          </>\r\n        ) : (\r\n          t(\"navigation.calculateRoute\")\r\n        )}\r\n      </button>\r\n\r\n          {/* Route Summary */}\r\n          {routeSummary && route && (\r\n            <div\r\n              className=\"rounded-lg p-4 space-y-3\"\r\n              style={{\r\n                backgroundColor: theme.colors.background.elevated,\r\n                border: `1px solid ${theme.colors.border.main}`,\r\n              }}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin className=\"w-4 h-4\" style={{ color: theme.colors.accent.main }} />\r\n                  <span className=\"text-sm font-semibold\" style={{ color: theme.colors.text.primary }}>\r\n                    {(routeSummary.distance / 1000).toFixed(2)} km\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Clock className=\"w-4 h-4\" style={{ color: theme.colors.accent.main }} />\r\n                  <span className=\"text-sm font-semibold\" style={{ color: theme.colors.text.primary }}>\r\n                    ~{routeSummary.duration} min\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Route Instructions */}\r\n          {routeInstructions.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <h3\r\n                className=\"text-sm font-semibold\"\r\n                style={{ color: theme.colors.text.primary }}\r\n              >\r\n                {t(\"navigation.navigationInstructions\")}\r\n              </h3>\r\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {routeInstructions.map((instruction, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"rounded-lg p-3 text-xs\"\r\n                    style={{\r\n                      backgroundColor: theme.colors.background.elevated,\r\n                      border: `1px solid ${theme.colors.border.main}`,\r\n                    }}\r\n                  >\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <span\r\n                        className=\"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold\"\r\n                        style={{\r\n                          backgroundColor: theme.colors.accent.main,\r\n                          color: theme.colors.accent.contrast,\r\n                        }}\r\n                      >\r\n                        {index + 1}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        <p style={{ color: theme.colors.text.primary }}>\r\n                          {instruction.instruction}\r\n                        </p>\r\n                        {instruction.distance > 0 && (\r\n                          <p className=\"mt-1\" style={{ color: theme.colors.text.secondary }}>\r\n                            {(instruction.distance / 1000).toFixed(2)} km\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden relative\" style={{ backgroundColor: theme.colors.background.default }}>\r\n      {/* Left Panel - Navigation (Desktop only) */}\r\n      <div\r\n        className=\"hidden md:flex md:w-80 lg:w-72 flex-shrink-0 overflow-y-auto\"\r\n        style={{ backgroundColor: \"#ffffff\" }}\r\n      >\r\n        <NavigationForm />\r\n      </div>\r\n\r\n      {/* Mobile Navigation Drawer */}\r\n      {showMobileNav && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden\"\r\n            onClick={() => setShowMobileNav(false)}\r\n          />\r\n          {/* Drawer */}\r\n          <div\r\n            className=\"fixed inset-y-0 left-0 w-80 max-w-[85vw] bg-white z-50 shadow-xl md:hidden overflow-y-auto\"\r\n            style={{ backgroundColor: \"#ffffff\" }}\r\n          >\r\n            <NavigationForm />\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Map Panel - Always visible */}\r\n      <div className=\"flex-1 relative flex flex-col w-full md:w-auto\" style={{ backgroundColor: theme.colors.background.default }}>\r\n        {/* Mobile Navigation Button - Fixed just above ClassFAB button */}\r\n        <button\r\n          onClick={() => setShowMobileNav(true)}\r\n          className=\"md:hidden fixed right-6 z-30 w-14 h-14 rounded-full shadow-lg transition-all flex items-center justify-center\"\r\n          style={{\r\n            bottom: '144px', // Mobile: bottom-20 (80px) + h-14 (56px) + 8px gap = 144px\r\n            backgroundColor: theme.colors.accent.main,\r\n            color: theme.colors.accent.contrast,\r\n            boxShadow: theme.shadow.lg,\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.transform = 'scale(1.05)';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.transform = 'scale(1)';\r\n          }}\r\n        >\r\n          <Navigation className=\"w-6 h-6 text-white\" />\r\n        </button>\r\n        {/* Search Bar */}\r\n        <div\r\n          className=\"border-b p-4\"\r\n          style={{\r\n            backgroundColor: theme.colors.background.elevated,\r\n            borderColor: theme.colors.border.main,\r\n            boxShadow: theme.shadow.sm,\r\n          }}\r\n        >\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search\r\n                className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5\"\r\n                style={{ color: theme.colors.gray[400] }}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder={t(\"map.searchPlaceholder\")}\r\n                className=\"w-full rounded-lg focus:outline-none transition-all\"\r\n                style={{\r\n                  paddingLeft: theme.spacing[10],\r\n                  paddingRight: theme.spacing[10],\r\n                  paddingTop: theme.spacing[3],\r\n                  paddingBottom: theme.spacing[3],\r\n                  border: `1px solid ${theme.colors.border.main}`,\r\n                  fontSize: theme.typography.base.fontSize,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n                onFocus={(e) => {\r\n                  e.currentTarget.style.borderColor = theme.colors.accent.main;\r\n                  e.currentTarget.style.boxShadow = `0 0 0 3px ${theme.colors.accent.main}20`;\r\n                }}\r\n                onBlur={(e) => {\r\n                  e.currentTarget.style.borderColor = theme.colors.border.main;\r\n                  e.currentTarget.style.boxShadow = 'none';\r\n                }}\r\n              />\r\n              {searchQuery && (\r\n                <button\r\n                  onClick={() => setSearchQuery(\"\")}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded transition-colors\"\r\n                  style={{ color: theme.colors.gray[400] }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.color = theme.colors.gray[600];\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.color = theme.colors.gray[400];\r\n                  }}\r\n                >\r\n                  <X className=\"w-5 h-5\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={() => setShowFilters(!showFilters)}\r\n              className=\"rounded-lg transition-all flex items-center space-x-2\"\r\n              style={{\r\n                padding: theme.spacing[3],\r\n                border: `1px solid ${showFilters ? theme.colors.accent.main : theme.colors.border.main}`,\r\n                backgroundColor: showFilters ? theme.colors.accent.main + '10' : 'transparent',\r\n                color: showFilters ? theme.colors.accent.main : theme.colors.gray[700],\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                if (!showFilters) {\r\n                  e.currentTarget.style.backgroundColor = theme.colors.gray[50];\r\n                }\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                if (!showFilters) {\r\n                  e.currentTarget.style.backgroundColor = 'transparent';\r\n                }\r\n              }}\r\n            >\r\n              <Filter className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Type Filters */}\r\n          {showFilters && (\r\n            <div className=\"mt-4 flex flex-wrap gap-2\">\r\n              {locationTypes.map((type) => {\r\n                const isSelected = selectedTypes.has(type);\r\n                return (\r\n                  <button\r\n                    key={type}\r\n                    onClick={() => toggleType(type)}\r\n                    className=\"rounded-lg text-sm font-medium transition-all\"\r\n                    style={{\r\n                      padding: `${theme.spacing[2]} ${theme.spacing[4]}`,\r\n                      backgroundColor: isSelected\r\n                        ? theme.colors.accent.main\r\n                        : theme.colors.background.elevated,\r\n                      border: `1px solid ${isSelected ? theme.colors.accent.main : theme.colors.border.main}`,\r\n                      color: isSelected ? theme.colors.accent.contrast : theme.colors.text.primary,\r\n                      boxShadow: isSelected ? theme.shadow.sm : 'none',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      if (!isSelected) {\r\n                        e.currentTarget.style.backgroundColor = theme.colors.gray[100];\r\n                      }\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      if (!isSelected) {\r\n                        e.currentTarget.style.backgroundColor = theme.colors.background.elevated;\r\n                      }\r\n                    }}\r\n                  >\r\n                    {t(`map.locationTypes.${type}`) || type}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Map Container */}\r\n        <div className=\"flex-1 relative\">\r\n          <EnhancedAirportMap\r\n            locations={filteredLocations}\r\n            selectedLocation={selectedLocation}\r\n            onLocationSelect={setSelectedLocation}\r\n            showRoute={route}\r\n            currentFloor={currentFloor}\r\n          />\r\n\r\n          {/* Floor Selector */}\r\n          <div\r\n            className=\"absolute top-2 left-2 md:top-4 md:left-4 rounded-lg md:rounded-xl overflow-hidden\"\r\n            style={{\r\n              backgroundColor: theme.colors.background.elevated,\r\n              boxShadow: theme.shadow.lg,\r\n            }}\r\n          >\r\n            {floors.map((floor) => {\r\n              const isActive = currentFloor === floor.level;\r\n              return (\r\n                <button\r\n                  key={floor.level}\r\n                  onClick={() => {\r\n                    setCurrentFloor(floor.level);\r\n                    // Filter locations by floor when floor changes\r\n                    const floorLoc = locations.find((loc) => loc.floor === floor.level);\r\n                    if (floorLoc && (startLocation || endLocation)) {\r\n                      // Keep selection if location exists on new floor\r\n                      const start = locations.find((loc) => loc.id === startLocation);\r\n                      const end = locations.find((loc) => loc.id === endLocation);\r\n                      if (start && start.floor !== floor.level) setStartLocation(\"\");\r\n                      if (end && end.floor !== floor.level) setEndLocation(\"\");\r\n                    }\r\n                  }}\r\n                  className=\"block w-full text-left transition-all px-2 py-1.5 md:px-3 md:py-2\"\r\n                  style={{\r\n                    borderBottom: `1px solid ${theme.colors.border.light}`,\r\n                    backgroundColor: isActive\r\n                      ? theme.colors.accent.main\r\n                      : theme.colors.background.elevated,\r\n                    color: isActive ? theme.colors.accent.contrast : theme.colors.text.primary,\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    if (!isActive) {\r\n                      e.currentTarget.style.backgroundColor = theme.colors.gray[50];\r\n                    }\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    if (!isActive) {\r\n                      e.currentTarget.style.backgroundColor = theme.colors.background.elevated;\r\n                    }\r\n                  }}\r\n                >\r\n                  <div\r\n                    className=\"font-semibold text-xs md:text-sm\"\r\n                    style={{\r\n                      fontSize: '12px',\r\n                    }}\r\n                  >\r\n                    {floor.level === 0 ? t(\"common.floor.ground\") : `${t(\"common.floor.level\")} ${floor.level}`}\r\n                  </div>\r\n                  <div\r\n                    className=\"mt-0.5 text-xs md:text-xs\"\r\n                    style={{\r\n                      fontSize: '10px',\r\n                      color: isActive\r\n                        ? theme.colors.accent.contrast + 'CC'\r\n                        : theme.colors.text.secondary,\r\n                    }}\r\n                  >\r\n                    {floor.name.split(\" - \")[1] || floor.name}\r\n                  </div>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Legend */}\r\n          <div\r\n            className=\"absolute bottom-4 right-4 rounded-xl p-4 max-w-xs\"\r\n            style={{\r\n              backgroundColor: theme.colors.background.elevated,\r\n              boxShadow: theme.shadow.lg,\r\n            }}\r\n          >\r\n            <h3\r\n              className=\"font-semibold mb-3 flex items-center\"\r\n              style={{\r\n                fontSize: theme.typography.base.fontSize,\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              <Layers className=\"w-4 h-4 mr-2\" />\r\n              {t(\"map.legend\")}\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-2\"\r\n              style={{ fontSize: theme.typography.tiny.fontSize }}\r\n            >\r\n              {legendLocationTypes.map((type) => (\r\n                <div key={type} className=\"flex items-center space-x-2\">\r\n                  <div\r\n                    className=\"w-4 h-4 rounded-full flex-shrink-0\"\r\n                    style={{\r\n                      backgroundColor: locationColors[type] || theme.colors.gray[500],\r\n                      boxShadow: theme.shadow.sm,\r\n                    }}\r\n                  />\r\n                  <span style={{ color: theme.colors.text.secondary }}>{t(`map.locationTypes.${type}`) || type}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}