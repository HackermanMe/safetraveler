{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/data/airport-data.json"],"sourcesContent":["{\"airport\":{\"name\":\"Aéroport International Gnassingbé Eyadéma\",\"code\":\"LFW\",\"city\":\"Lomé\",\"country\":\"Togo\",\"coordinates\":[1.2549,6.1659],\"capacity\":\"2 000 000 passagers/an\",\"hub\":\"ASKY Airlines\",\"distance_city\":\"6.8 km du centre-ville\"},\"locations\":[{\"id\":\"gate-a1\",\"name\":\"Porte A1\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253568,6.170194],\"description\":\"Porte d'embarquement A1 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-a2\",\"name\":\"Porte A2\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253185,6.169748],\"description\":\"Porte d'embarquement A2 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-a3\",\"name\":\"Porte A3\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.252825,6.169437],\"description\":\"Porte d'embarquement A3 - Vols internationaux\",\"status\":\"open\"},{\"id\":\"gate-b1\",\"name\":\"Porte B1\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.254069,6.171084],\"description\":\"Porte d'embarquement B1 - Vols régionaux\",\"status\":\"open\"},{\"id\":\"gate-b2\",\"name\":\"Porte B2\",\"type\":\"gate\",\"floor\":1,\"coordinates\":[1.253923,6.170668],\"description\":\"Porte d'embarquement B2 - Vols régionaux\",\"status\":\"open\"},{\"id\":\"checkin-economy-1\",\"name\":\"Enregistrement Zone A\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.253038,6.170017],\"description\":\"Comptoirs 1-20 - Classe Économique\",\"status\":\"open\",\"accessibleTo\":[\"economy\"]},{\"id\":\"checkin-economy-2\",\"name\":\"Enregistrement Zone B\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.253899,6.170813],\"description\":\"Comptoirs 21-40 - Classe Économique\",\"status\":\"open\",\"accessibleTo\":[\"economy\"]},{\"id\":\"checkin-business\",\"name\":\"Enregistrement Business\",\"type\":\"checkin\",\"floor\":0,\"coordinates\":[1.252822,6.169666],\"description\":\"Comptoirs Business & Première Classe\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"security-main\",\"name\":\"Contrôle de Sécurité Principal\",\"type\":\"security\",\"floor\":0,\"coordinates\":[1.253083,6.172066],\"description\":\"Point de contrôle sécurité et passeport\",\"status\":\"busy\"},{\"id\":\"security-fast\",\"name\":\"Contrôle Fast Track\",\"type\":\"security\",\"floor\":0,\"coordinates\":[1.253317,6.170509],\"description\":\"Voie rapide Business/Première Classe\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"toilet-arrival\",\"name\":\"Toilettes Zone Arrivées\",\"type\":\"toilet\",\"floor\":0,\"coordinates\":[1.253572,6.170538],\"description\":\"Toilettes accessibles PMR\",\"status\":\"open\"},{\"id\":\"toilet-checkin\",\"name\":\"Toilettes Zone Enregistrement\",\"type\":\"toilet\",\"floor\":0,\"coordinates\":[1.253357,6.170299],\"description\":\"Toilettes accessibles PMR\",\"status\":\"open\"},{\"id\":\"toilet-gates-a\",\"name\":\"Toilettes Portes A\",\"type\":\"toilet\",\"floor\":1,\"coordinates\":[1.253572,6.170538],\"description\":\"Toilettes zone internationale\",\"status\":\"open\"},{\"id\":\"toilet-gates-b\",\"name\":\"Toilettes Portes B\",\"type\":\"toilet\",\"floor\":1,\"coordinates\":[1.253357,6.170299],\"description\":\"Toilettes zone domestique\",\"status\":\"open\"},{\"id\":\"restaurant-maquis\",\"name\":\"Le Maquis de l'Aéroport\",\"type\":\"restaurant\",\"floor\":0,\"coordinates\":[1.252739,6.170065],\"description\":\"Cuisine togolaise authentique - Fufu, Akpan, Akoumé\",\"status\":\"open\",\"hours\":\"6h - 22h\"},{\"id\":\"restaurant-teranga\",\"name\":\"Restaurant Teranga\",\"type\":\"restaurant\",\"floor\":1,\"coordinates\":[1.252739,6.170065],\"description\":\"Cuisine africaine et internationale\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"cafe-express\",\"name\":\"Café Express\",\"type\":\"restaurant\",\"floor\":1,\"coordinates\":[1.252739,6.170065],\"description\":\"Café, viennoiseries, sandwichs rapides\",\"status\":\"open\",\"hours\":\"4h30 - 23h30\"},{\"id\":\"shop-dutyfree\",\"name\":\"Duty Free Lomé\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.25217,6.169382],\"description\":\"Parfums, alcools, tabac, cosmétiques hors taxes\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"shop-artisanat\",\"name\":\"Artisanat Togolais\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.251705,6.169352],\"description\":\"Tissus batik, sculptures, bijoux locaux, souvenirs\",\"status\":\"open\",\"hours\":\"6h - 22h\"},{\"id\":\"shop-presse\",\"name\":\"Relay Presse\",\"type\":\"shop\",\"floor\":1,\"coordinates\":[1.252265,6.169839],\"description\":\"Presse internationale, livres, snacks\",\"status\":\"open\",\"hours\":\"5h - 23h\"},{\"id\":\"info-main\",\"name\":\"Information Principale\",\"type\":\"information\",\"floor\":0,\"coordinates\":[1.253386,6.17088],\"description\":\"Renseignements, objets trouvés, assistance\",\"status\":\"open\"},{\"id\":\"info-gates\",\"name\":\"Information Zone Embarquement\",\"type\":\"information\",\"floor\":1,\"coordinates\":[1.252895,6.170068],\"description\":\"Informations vols et assistance embarquement\",\"status\":\"open\"},{\"id\":\"lounge-asky\",\"name\":\"Salon VIP ASKY Airlines\",\"type\":\"lounge\",\"floor\":1,\"coordinates\":[1.252755,6.170232],\"description\":\"Salon VIP avec restauration, Wi-Fi, douches\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]},{\"id\":\"lounge-business\",\"name\":\"Salon Business\",\"type\":\"lounge\",\"floor\":1,\"coordinates\":[1.253317,6.170509],\"description\":\"Salon Business avec bar et restauration\",\"status\":\"open\",\"accessibleTo\":[\"business\",\"first\"]}],\"services\":[{\"id\":\"service-prmassist\",\"name\":\"Assistance Passagers à Mobilité Réduite\",\"category\":\"assistance\",\"description\":\"Accompagnement personnalisé, fauteuils roulants, assistance embarquement/débarquement\",\"location\":\"info-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 55\",\"icon\":\"accessibility\",\"free\":true},{\"id\":\"service-medical\",\"name\":\"Assistance Médicale d'Urgence\",\"category\":\"medical\",\"description\":\"Infirmerie avec personnel qualifié, premiers secours, défibrillateur\",\"location\":\"medical-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 56\",\"icon\":\"cross\",\"free\":true},{\"id\":\"service-lostfound\",\"name\":\"Objets Trouvés\",\"category\":\"lost_found\",\"description\":\"Déclaration et récupération d'objets perdus dans l'enceinte de l'aéroport\",\"location\":\"info-main\",\"hours\":\"6h - 23h\",\"contact\":\"+228 22 23 44 57\",\"icon\":\"briefcase\",\"free\":true},{\"id\":\"service-flightinfo\",\"name\":\"Information Vols en Temps Réel\",\"category\":\"information\",\"description\":\"Horaires, retards, annulations, changements de porte\",\"location\":\"info-main\",\"hours\":\"24/7\",\"contact\":\"+228 22 23 44 58\",\"icon\":\"info\",\"free\":true},{\"id\":\"service-customs\",\"name\":\"Services Douaniers\",\"category\":\"customs\",\"description\":\"Déclarations douanières, contrôles, informations réglementaires\",\"location\":\"customs-arrival\",\"hours\":\"Selon horaires des vols\",\"contact\":\"+228 22 23 44 59\",\"icon\":\"shield\",\"free\":true},{\"id\":\"service-wifi\",\"name\":\"Wi-Fi Gratuit\",\"category\":\"connectivity\",\"description\":\"Accès Internet sans fil gratuit dans tout l'aéroport\",\"location\":\"Partout\",\"hours\":\"24/7\",\"network\":\"Aeroport_LFW_Free\",\"icon\":\"wifi\",\"free\":true},{\"id\":\"service-porter\",\"name\":\"Porteurs de Bagages\",\"category\":\"assistance\",\"description\":\"Aide au transport des bagages\",\"location\":\"entrance-main\",\"hours\":\"5h - 23h\",\"icon\":\"luggage\",\"free\":false,\"pricing\":\"2000-5000 CFA selon distance\"},{\"id\":\"service-vip\",\"name\":\"Service VIP & Meet & Greet\",\"category\":\"premium\",\"description\":\"Accueil personnalisé, assistance formalités, salon VIP, voie rapide\",\"location\":\"entrance-vip\",\"hours\":\"24/7 (sur réservation)\",\"contact\":\"+228 22 23 44 60\",\"icon\":\"star\",\"free\":false,\"pricing\":\"À partir de 50 000 CFA\"}],\"floors\":[{\"level\":0,\"name\":\"Rez-de-chaussée - Arrivées & Départs\",\"description\":\"Zone publique : Enregistrement, Bagages, Services\",\"bounds\":[[1.251,6.163],[1.2595,6.169]]},{\"level\":1,\"name\":\"Étage 1 - Zone d'Embarquement\",\"description\":\"Zone sécurisée : Portes d'embarquement, Restaurants, Boutiques\",\"bounds\":[[1.255,6.166],[1.2595,6.169]]}],\"airlines\":[{\"code\":\"KP\",\"name\":\"ASKY Airlines\",\"type\":\"hub\",\"destinations\":[\"Dakar\",\"Abidjan\",\"Ouagadougou\",\"Niamey\",\"Cotonou\",\"Accra\",\"Lagos\",\"Libreville\"]},{\"code\":\"AF\",\"name\":\"Air France\",\"type\":\"international\",\"destinations\":[\"Paris CDG\"]},{\"code\":\"SN\",\"name\":\"Brussels Airlines\",\"type\":\"international\",\"destinations\":[\"Bruxelles\"]},{\"code\":\"ET\",\"name\":\"Ethiopian Airlines\",\"type\":\"international\",\"destinations\":[\"Addis-Abeba\"]},{\"code\":\"TK\",\"name\":\"Turkish Airlines\",\"type\":\"international\",\"destinations\":[\"Istanbul\"]},{\"code\":\"AT\",\"name\":\"Royal Air Maroc\",\"type\":\"international\",\"destinations\":[\"Casablanca\"]},{\"code\":\"EK\",\"name\":\"Emirates\",\"type\":\"international\",\"destinations\":[\"Dubaï\"]},{\"code\":\"HF\",\"name\":\"Air Côte d'Ivoire\",\"type\":\"regional\",\"destinations\":[\"Abidjan\",\"Dakar\"]}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 3, "column": 8266}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/safetraveler/components/map/EnhancedAirportMap.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport { Location, LocationType } from \"@/lib/types\";\nimport { locationColors as themeLocationColors, theme } from \"@/lib/config/theme\";\n\ninterface EnhancedAirportMapProps {\n  locations: Location[];\n  selectedLocation?: string;\n  onLocationSelect?: (locationId: string) => void;\n  showRoute?: [number, number][];\n  currentFloor?: number;\n}\n\n// Use location colors from theme\nconst locationColors = themeLocationColors;\n\nexport default function EnhancedAirportMap({\n  locations,\n  selectedLocation,\n  onLocationSelect,\n  showRoute,\n  currentFloor = 0,\n}: EnhancedAirportMapProps) {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const markers = useRef<{ [key: string]: mapboxgl.Marker }>({});\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const imageCache = useRef<Map<string, HTMLImageElement>>(new Map());\n\n  useEffect(() => {\n    if (!mapContainer.current || map.current) return;\n\n    const token = process.env.NEXT_PUBLIC_MAPBOX_TOKEN;\n    if (!token) {\n      console.error(\"Mapbox token is missing\");\n      return;\n    }\n\n    mapboxgl.accessToken = token;\n\n    // Create map with Streets style for Gnassingbé Eyadéma Airport (LFW)\n    // Gnassingbé Eyadéma Airport coordinates: [1.2549, 6.1659]\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v12\", // Streets style for detailed street map\n      center: [1.2549, 6.1659], // Gnassingbé Eyadéma Airport (LFW) coordinates - Lomé, Togo\n      zoom: 15.5, // Appropriate zoom level for airport overview\n      pitch: 0,\n      bearing: 0,\n      attributionControl: true, // Show Mapbox attribution\n      minZoom: 11, // Allow zooming out to see surrounding area\n      maxZoom: 20, // Allow detailed zoom\n    });\n\n    // Add controls\n    map.current.addControl(\n      new mapboxgl.NavigationControl({\n        showCompass: true,\n        showZoom: true,\n        visualizePitch: false,\n      }),\n      \"top-right\"\n    );\n\n    map.current.addControl(\n      new mapboxgl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true,\n        },\n        trackUserLocation: true,\n        showUserHeading: true,\n        showUserLocation: true,\n      }),\n      \"top-right\"\n    );\n\n    map.current.on(\"load\", () => {\n      setMapLoaded(true);\n    });\n\n    return () => {\n      if (map.current) {\n        map.current.remove();\n        map.current = null;\n      }\n    };\n  }, []);\n\n  // Create SVG image for marker\n  const createMarkerImage = (\n    color: string,\n    initial: string,\n    isSelected: boolean\n  ): Promise<HTMLImageElement> => {\n    return new Promise((resolve) => {\n      const imageId = `${color}-${initial}-${isSelected}`;\n      \n      // Always create new image to ensure it's up to date\n      const pinHeadSize = isSelected ? 28 : 24;\n      const pinPointSize = 12;\n      const totalHeight = pinHeadSize + pinPointSize;\n      const totalWidth = pinHeadSize;\n\n      const svg = `\n        <svg width=\"${totalWidth}\" height=\"${totalHeight}\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <filter id=\"shadow-${imageId.replace(/[^a-zA-Z0-9]/g, '_')}\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n              <feDropShadow dx=\"0\" dy=\"${isSelected ? '2' : '1'}\" stdDeviation=\"${isSelected ? '2' : '1.5'}\" flood-opacity=\"0.3\"/>\n            </filter>\n          </defs>\n          <g filter=\"url(#shadow-${imageId.replace(/[^a-zA-Z0-9]/g, '_')})\">\n            <circle cx=\"${totalWidth / 2}\" cy=\"${pinHeadSize / 2}\" r=\"${pinHeadSize / 2 - 1}\" fill=\"${color}\" stroke=\"${isSelected ? '#fff' : 'rgba(255,255,255,0.9)'}\" stroke-width=\"2\"/>\n            <path d=\"M ${totalWidth / 2 - pinPointSize / 2} ${pinHeadSize} L ${totalWidth / 2} ${totalHeight} L ${totalWidth / 2 + pinPointSize / 2} ${pinHeadSize} Z\" fill=\"${color}\"/>\n            <text x=\"${totalWidth / 2}\" y=\"${pinHeadSize / 2}\" font-family=\"system-ui, -apple-system, sans-serif\" font-size=\"${isSelected ? '14' : '12'}\" font-weight=\"bold\" fill=\"#fff\" text-anchor=\"middle\" dominant-baseline=\"central\">${initial}</text>\n          </g>\n        </svg>\n      `;\n\n      const img = new Image();\n      img.onload = () => {\n        imageCache.current.set(imageId, img);\n        resolve(img);\n      };\n      img.src = `data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svg)))}`;\n    });\n  };\n\n  // Add enhanced markers using Mapbox symbols (fixed size on zoom)\n  useEffect(() => {\n    if (!map.current || !mapLoaded) return;\n\n    // Remove existing markers and layers\n    Object.values(markers.current).forEach((marker) => marker.remove());\n    markers.current = {};\n\n    const sourceId = \"locations-source\";\n    const layerId = \"locations-layer\";\n\n    // Remove existing source and layer if they exist\n    if (map.current.getLayer(layerId)) {\n      map.current.removeLayer(layerId);\n    }\n    if (map.current.getSource(sourceId)) {\n      map.current.removeSource(sourceId);\n    }\n\n    const floorLocations = locations.filter((loc) => loc.floor === currentFloor);\n\n    // Create GeoJSON features\n    const features = floorLocations.map((location) => ({\n      type: \"Feature\" as const,\n      geometry: {\n        type: \"Point\" as const,\n        coordinates: location.coordinates,\n      },\n      properties: {\n        id: location.id,\n        name: location.name,\n        type: location.type,\n        description: location.description || \"\",\n        status: location.status || \"\",\n        color: locationColors[location.type] || \"#757575\",\n        initial: getLocationInitial(location.type),\n        isSelected: selectedLocation === location.id,\n      },\n    }));\n\n    // Add source\n    map.current.addSource(sourceId, {\n      type: \"geojson\",\n      data: {\n        type: \"FeatureCollection\",\n        features,\n      },\n    });\n\n    // Load images and add layer\n    const loadImagesAndAddLayer = async () => {\n      if (!map.current) return;\n\n      const uniqueMarkers = new Set<string>();\n      floorLocations.forEach((location) => {\n        const color = locationColors[location.type] || \"#757575\";\n        const initial = getLocationInitial(location.type);\n        const isSelected = selectedLocation === location.id;\n        uniqueMarkers.add(`${color}-${initial}-${isSelected}`);\n      });\n\n      // Load all unique marker images\n      await Promise.all(\n        Array.from(uniqueMarkers).map(async (key) => {\n          if (!map.current) return;\n          // Parse key: format is \"color-initial-selected\"\n          // Color may contain dashes, so we need to split from the end\n          const parts = key.split(\"-\");\n          const selected = parts[parts.length - 1];\n          const initial = parts[parts.length - 2];\n          const color = parts.slice(0, -2).join(\"-\");\n          const isSelected = selected === \"true\";\n          const imageId = `marker-${key}`;\n          const img = await createMarkerImage(color, initial, isSelected);\n          \n          if (!map.current.hasImage(imageId)) {\n            map.current.addImage(imageId, img);\n          }\n        })\n      );\n\n      if (!map.current) return;\n\n      // Add layer with fixed icon size (doesn't scale with zoom)\n      if (!map.current.getLayer(layerId)) {\n        map.current.addLayer({\n          id: layerId,\n          type: \"symbol\",\n          source: sourceId,\n          layout: {\n            \"icon-image\": [\n              \"case\",\n              [\"get\", \"isSelected\"],\n              [\n                \"concat\",\n                \"marker-\",\n                [\"get\", \"color\"],\n                \"-\",\n                [\"get\", \"initial\"],\n                \"-true\"\n              ],\n              [\n                \"concat\",\n                \"marker-\",\n                [\"get\", \"color\"],\n                \"-\",\n                [\"get\", \"initial\"],\n                \"-false\"\n              ]\n            ],\n            \"icon-size\": 1, // Fixed size - doesn't scale with zoom\n            \"icon-anchor\": \"bottom\",\n            \"icon-allow-overlap\": true,\n            \"icon-ignore-placement\": true,\n          },\n        });\n      }\n\n      // Define event handlers\n      const clickHandler = (e: mapboxgl.MapLayerMouseEvent) => {\n        if (!e.features || !e.features[0] || !map.current) return;\n\n        const props = e.features[0].properties;\n        if (!props) return;\n\n        const color = props.color as string;\n        const coordinates = (e.features[0].geometry as any).coordinates.slice();\n        const location = floorLocations.find((loc) => loc.id === props.id);\n\n        if (!location) return;\n\n        if (onLocationSelect) {\n          onLocationSelect(location.id);\n        }\n\n        const popup = new mapboxgl.Popup({\n          offset: 25,\n          closeButton: false,\n          maxWidth: \"300px\",\n        })\n          .setLngLat(coordinates as [number, number])\n          .setHTML(`\n            <div style=\"padding: 12px;\">\n              <div style=\"display: flex; align-items: center; margin-bottom: 8px;\">\n                <div style=\"width: 12px; height: 12px; border-radius: 50%; background-color: ${color}; border: 2px solid ${color}; margin-right: 12px; flex-shrink: 0;\"></div>\n                <div>\n                  <h3 style=\"font-weight: 600; font-size: 16px; margin: 0; color: #1f2937;\">${location.name}</h3>\n                  <p style=\"font-size: 12px; color: #6b7280; margin: 0;\">${getLocationTypeLabel(location.type)}</p>\n                </div>\n              </div>\n              ${location.description ? `<p style=\"font-size: 14px; color: #4b5563; margin: 0;\">${location.description}</p>` : \"\"}\n              ${location.status ? `<div style=\"margin-top: 8px; padding: 4px 8px; background-color: ${getStatusColor(location.status)}20; color: ${getStatusColor(location.status)}; border-radius: 4px; font-size: 12px; display: inline-block; font-weight: 500;\">${getStatusLabel(location.status)}</div>` : \"\"}\n            </div>\n          `)\n          .addTo(map.current);\n      };\n\n      const mouseEnterHandler = () => {\n        if (map.current) {\n          map.current.getCanvas().style.cursor = \"pointer\";\n        }\n      };\n\n      const mouseLeaveHandler = () => {\n        if (map.current) {\n          map.current.getCanvas().style.cursor = \"\";\n        }\n      };\n\n      // Add event handlers\n      map.current.on(\"click\", layerId, clickHandler);\n      map.current.on(\"mouseenter\", layerId, mouseEnterHandler);\n      map.current.on(\"mouseleave\", layerId, mouseLeaveHandler);\n\n      // Store handlers for cleanup\n      (map.current as any)._markerHandlers = {\n        click: clickHandler,\n        mouseenter: mouseEnterHandler,\n        mouseleave: mouseLeaveHandler,\n      };\n    };\n\n    loadImagesAndAddLayer();\n\n    return () => {\n      if (map.current) {\n        const handlers = (map.current as any)._markerHandlers;\n        if (handlers) {\n          map.current.off(\"click\", layerId, handlers.click);\n          map.current.off(\"mouseenter\", layerId, handlers.mouseenter);\n          map.current.off(\"mouseleave\", layerId, handlers.mouseleave);\n          delete (map.current as any)._markerHandlers;\n        }\n        if (map.current.getLayer(layerId)) {\n          map.current.removeLayer(layerId);\n        }\n        if (map.current.getSource(sourceId)) {\n          map.current.removeSource(sourceId);\n        }\n      }\n    };\n  }, [locations, mapLoaded, currentFloor, selectedLocation, onLocationSelect]);\n\n  // Draw route\n  useEffect(() => {\n    if (!map.current || !mapLoaded || !showRoute) return;\n\n    const routeId = \"route\";\n\n    if (map.current.getSource(routeId)) {\n      map.current.removeLayer(routeId);\n      map.current.removeSource(routeId);\n    }\n\n    map.current.addSource(routeId, {\n      type: \"geojson\",\n      data: {\n        type: \"Feature\",\n        properties: {},\n        geometry: {\n          type: \"LineString\",\n          coordinates: showRoute,\n        },\n      },\n    });\n\n    map.current.addLayer({\n      id: routeId,\n      type: \"line\",\n      source: routeId,\n      layout: {\n        \"line-join\": \"round\",\n        \"line-cap\": \"round\",\n      },\n      paint: {\n        \"line-color\": theme.colors.accent.main, // Yellow accent for routes\n        \"line-width\": [\n          \"interpolate\",\n          [\"linear\"],\n          [\"zoom\"],\n          10, 4,\n          15, 6,\n          18, 8\n        ],\n        \"line-opacity\": 0.9,\n      },\n    });\n\n    // Add a subtle outline for better visibility\n    map.current.addLayer({\n      id: `${routeId}-outline`,\n      type: \"line\",\n      source: routeId,\n      layout: {\n        \"line-join\": \"round\",\n        \"line-cap\": \"round\",\n      },\n      paint: {\n        \"line-color\": \"#ffffff\",\n        \"line-width\": [\n          \"interpolate\",\n          [\"linear\"],\n          [\"zoom\"],\n          10, 6,\n          15, 8,\n          18, 10\n        ],\n        \"line-opacity\": 0.5,\n      },\n    }, routeId); // Insert before the main route layer\n\n    // Fit map to route bounds with padding\n    if (showRoute.length > 0) {\n      const bounds = showRoute.reduce(\n        (bounds, coord) => bounds.extend(coord as [number, number]),\n        new mapboxgl.LngLatBounds(showRoute[0] as [number, number], showRoute[0] as [number, number])\n      );\n\n      map.current.fitBounds(bounds, {\n        padding: { top: 100, bottom: 100, left: 100, right: 100 },\n        maxZoom: 18,\n        duration: 1000,\n      });\n    }\n\n    return () => {\n      if (map.current) {\n        if (map.current.getLayer(`${routeId}-outline`)) {\n          map.current.removeLayer(`${routeId}-outline`);\n        }\n        if (map.current.getLayer(routeId)) {\n          map.current.removeLayer(routeId);\n        }\n        if (map.current.getSource(routeId)) {\n          map.current.removeSource(routeId);\n        }\n      }\n    };\n  }, [showRoute, mapLoaded]);\n\n  return <div ref={mapContainer} className=\"w-full h-full rounded-lg\" />;\n}\n\nfunction getLocationInitial(type: LocationType): string {\n  const initials: Record<LocationType, string> = {\n    gate: \"G\",\n    checkin: \"C\",\n    security: \"S\",\n    customs: \"D\",\n    toilet: \"T\",\n    restaurant: \"R\",\n    shop: \"B\",\n    information: \"i\",\n    exit: \"E\",\n    entrance: \"E\",\n    lounge: \"L\",\n    baggage: \"B\",\n    parking: \"P\",\n    medical: \"+\",\n    prayer: \"P\",\n    smoking: \"S\",\n    atm: \"$\",\n    wifi: \"W\",\n    charging: \"⚡\",\n  };\n  return initials[type] || \"?\";\n}\n\nfunction getLocationTypeLabel(type: LocationType): string {\n  const labels: Record<LocationType, string> = {\n    gate: \"Porte d'embarquement\",\n    checkin: \"Enregistrement\",\n    security: \"Sécurité\",\n    customs: \"Douane\",\n    toilet: \"Toilettes\",\n    restaurant: \"Restauration\",\n    shop: \"Boutique\",\n    information: \"Information\",\n    exit: \"Sortie\",\n    entrance: \"Entrée\",\n    lounge: \"Salon\",\n    baggage: \"Bagages\",\n    parking: \"Parking\",\n    medical: \"Médical\",\n    prayer: \"Salle de prière\",\n    smoking: \"Fumoir\",\n    atm: \"Distributeur\",\n    wifi: \"WiFi\",\n    charging: \"Recharge\",\n  };\n  return labels[type] || type;\n}\n\nfunction getStatusColor(status: string): string {\n  const colors: Record<string, string> = {\n    open: theme.colors.success.main,\n    closed: theme.colors.error.main,\n    busy: theme.colors.warning.main,\n  };\n  return colors[status] || theme.colors.gray[500];\n}\n\nfunction getStatusLabel(status: string): string {\n  const labels: Record<string, string> = {\n    open: \"Ouvert\",\n    closed: \"Fermé\",\n    busy: \"Affluence\",\n  };\n  return labels[status] || status;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AANA;;;;;;AAgBA,iCAAiC;AACjC,MAAM,iBAAiB,wIAAmB;AAE3B,SAAS,mBAAmB,EACzC,SAAS,EACT,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACT,eAAe,CAAC,EACQ;IACxB,MAAM,eAAe,IAAA,+MAAM,EAAiB;IAC5C,MAAM,MAAM,IAAA,+MAAM,EAAsB;IACxC,MAAM,UAAU,IAAA,+MAAM,EAAqC,CAAC;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,aAAa,IAAA,+MAAM,EAAgC,IAAI;IAE7D,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,OAAO,IAAI,IAAI,OAAO,EAAE;QAE1C,MAAM;QACN;;QAKA,+JAAQ,CAAC,WAAW,GAAG;QAEvB,qEAAqE;QACrE,2DAA2D;QAC3D,IAAI,OAAO,GAAG,IAAI,+JAAQ,CAAC,GAAG,CAAC;YAC7B,WAAW,aAAa,OAAO;YAC/B,OAAO;YACP,QAAQ;gBAAC;gBAAQ;aAAO;YACxB,MAAM;YACN,OAAO;YACP,SAAS;YACT,oBAAoB;YACpB,SAAS;YACT,SAAS;QACX;QAEA,eAAe;QACf,IAAI,OAAO,CAAC,UAAU,CACpB,IAAI,+JAAQ,CAAC,iBAAiB,CAAC;YAC7B,aAAa;YACb,UAAU;YACV,gBAAgB;QAClB,IACA;QAGF,IAAI,OAAO,CAAC,UAAU,CACpB,IAAI,+JAAQ,CAAC,gBAAgB,CAAC;YAC5B,iBAAiB;gBACf,oBAAoB;YACtB;YACA,mBAAmB;YACnB,iBAAiB;YACjB,kBAAkB;QACpB,IACA;QAGF,IAAI,OAAO,CAAC,EAAE,CAAC,QAAQ;YACrB,aAAa;QACf;QAEA,OAAO;YACL,IAAI,IAAI,OAAO,EAAE;gBACf,IAAI,OAAO,CAAC,MAAM;gBAClB,IAAI,OAAO,GAAG;YAChB;QACF;IACF,GAAG,EAAE;IAEL,8BAA8B;IAC9B,MAAM,oBAAoB,CACxB,OACA,SACA;QAEA,OAAO,IAAI,QAAQ,CAAC;YAClB,MAAM,UAAU,GAAG,MAAM,CAAC,EAAE,QAAQ,CAAC,EAAE,YAAY;YAEnD,oDAAoD;YACpD,MAAM,cAAc,aAAa,KAAK;YACtC,MAAM,eAAe;YACrB,MAAM,cAAc,cAAc;YAClC,MAAM,aAAa;YAEnB,MAAM,MAAM,CAAC;oBACC,EAAE,WAAW,UAAU,EAAE,YAAY;;+BAE1B,EAAE,QAAQ,OAAO,CAAC,iBAAiB,KAAK;uCAChC,EAAE,aAAa,MAAM,IAAI,gBAAgB,EAAE,aAAa,MAAM,MAAM;;;iCAG1E,EAAE,QAAQ,OAAO,CAAC,iBAAiB,KAAK;wBACjD,EAAE,aAAa,EAAE,MAAM,EAAE,cAAc,EAAE,KAAK,EAAE,cAAc,IAAI,EAAE,QAAQ,EAAE,MAAM,UAAU,EAAE,aAAa,SAAS,wBAAwB;uBAC/I,EAAE,aAAa,IAAI,eAAe,EAAE,CAAC,EAAE,YAAY,GAAG,EAAE,aAAa,EAAE,CAAC,EAAE,YAAY,GAAG,EAAE,aAAa,IAAI,eAAe,EAAE,CAAC,EAAE,YAAY,UAAU,EAAE,MAAM;qBAChK,EAAE,aAAa,EAAE,KAAK,EAAE,cAAc,EAAE,gEAAgE,EAAE,aAAa,OAAO,KAAK,kFAAkF,EAAE,QAAQ;;;MAG9O,CAAC;YAED,MAAM,MAAM,IAAI;YAChB,IAAI,MAAM,GAAG;gBACX,WAAW,OAAO,CAAC,GAAG,CAAC,SAAS;gBAChC,QAAQ;YACV;YACA,IAAI,GAAG,GAAG,CAAC,0BAA0B,EAAE,KAAK,SAAS,mBAAmB,QAAQ;QAClF;IACF;IAEA,iEAAiE;IACjE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,WAAW;QAEhC,qCAAqC;QACrC,OAAO,MAAM,CAAC,QAAQ,OAAO,EAAE,OAAO,CAAC,CAAC,SAAW,OAAO,MAAM;QAChE,QAAQ,OAAO,GAAG,CAAC;QAEnB,MAAM,WAAW;QACjB,MAAM,UAAU;QAEhB,iDAAiD;QACjD,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;YACjC,IAAI,OAAO,CAAC,WAAW,CAAC;QAC1B;QACA,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,WAAW;YACnC,IAAI,OAAO,CAAC,YAAY,CAAC;QAC3B;QAEA,MAAM,iBAAiB,UAAU,MAAM,CAAC,CAAC,MAAQ,IAAI,KAAK,KAAK;QAE/D,0BAA0B;QAC1B,MAAM,WAAW,eAAe,GAAG,CAAC,CAAC,WAAa,CAAC;gBACjD,MAAM;gBACN,UAAU;oBACR,MAAM;oBACN,aAAa,SAAS,WAAW;gBACnC;gBACA,YAAY;oBACV,IAAI,SAAS,EAAE;oBACf,MAAM,SAAS,IAAI;oBACnB,MAAM,SAAS,IAAI;oBACnB,aAAa,SAAS,WAAW,IAAI;oBACrC,QAAQ,SAAS,MAAM,IAAI;oBAC3B,OAAO,cAAc,CAAC,SAAS,IAAI,CAAC,IAAI;oBACxC,SAAS,mBAAmB,SAAS,IAAI;oBACzC,YAAY,qBAAqB,SAAS,EAAE;gBAC9C;YACF,CAAC;QAED,aAAa;QACb,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU;YAC9B,MAAM;YACN,MAAM;gBACJ,MAAM;gBACN;YACF;QACF;QAEA,4BAA4B;QAC5B,MAAM,wBAAwB;YAC5B,IAAI,CAAC,IAAI,OAAO,EAAE;YAElB,MAAM,gBAAgB,IAAI;YAC1B,eAAe,OAAO,CAAC,CAAC;gBACtB,MAAM,QAAQ,cAAc,CAAC,SAAS,IAAI,CAAC,IAAI;gBAC/C,MAAM,UAAU,mBAAmB,SAAS,IAAI;gBAChD,MAAM,aAAa,qBAAqB,SAAS,EAAE;gBACnD,cAAc,GAAG,CAAC,GAAG,MAAM,CAAC,EAAE,QAAQ,CAAC,EAAE,YAAY;YACvD;YAEA,gCAAgC;YAChC,MAAM,QAAQ,GAAG,CACf,MAAM,IAAI,CAAC,eAAe,GAAG,CAAC,OAAO;gBACnC,IAAI,CAAC,IAAI,OAAO,EAAE;gBAClB,gDAAgD;gBAChD,6DAA6D;gBAC7D,MAAM,QAAQ,IAAI,KAAK,CAAC;gBACxB,MAAM,WAAW,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE;gBACxC,MAAM,UAAU,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE;gBACvC,MAAM,QAAQ,MAAM,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;gBACtC,MAAM,aAAa,aAAa;gBAChC,MAAM,UAAU,CAAC,OAAO,EAAE,KAAK;gBAC/B,MAAM,MAAM,MAAM,kBAAkB,OAAO,SAAS;gBAEpD,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;oBAClC,IAAI,OAAO,CAAC,QAAQ,CAAC,SAAS;gBAChC;YACF;YAGF,IAAI,CAAC,IAAI,OAAO,EAAE;YAElB,2DAA2D;YAC3D,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;gBAClC,IAAI,OAAO,CAAC,QAAQ,CAAC;oBACnB,IAAI;oBACJ,MAAM;oBACN,QAAQ;oBACR,QAAQ;wBACN,cAAc;4BACZ;4BACA;gCAAC;gCAAO;6BAAa;4BACrB;gCACE;gCACA;gCACA;oCAAC;oCAAO;iCAAQ;gCAChB;gCACA;oCAAC;oCAAO;iCAAU;gCAClB;6BACD;4BACD;gCACE;gCACA;gCACA;oCAAC;oCAAO;iCAAQ;gCAChB;gCACA;oCAAC;oCAAO;iCAAU;gCAClB;6BACD;yBACF;wBACD,aAAa;wBACb,eAAe;wBACf,sBAAsB;wBACtB,yBAAyB;oBAC3B;gBACF;YACF;YAEA,wBAAwB;YACxB,MAAM,eAAe,CAAC;gBACpB,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,IAAI,OAAO,EAAE;gBAEnD,MAAM,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,UAAU;gBACtC,IAAI,CAAC,OAAO;gBAEZ,MAAM,QAAQ,MAAM,KAAK;gBACzB,MAAM,cAAc,AAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAS,WAAW,CAAC,KAAK;gBACrE,MAAM,WAAW,eAAe,IAAI,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK,MAAM,EAAE;gBAEjE,IAAI,CAAC,UAAU;gBAEf,IAAI,kBAAkB;oBACpB,iBAAiB,SAAS,EAAE;gBAC9B;gBAEA,MAAM,QAAQ,IAAI,+JAAQ,CAAC,KAAK,CAAC;oBAC/B,QAAQ;oBACR,aAAa;oBACb,UAAU;gBACZ,GACG,SAAS,CAAC,aACV,OAAO,CAAC,CAAC;;;6FAGyE,EAAE,MAAM,oBAAoB,EAAE,MAAM;;4FAErC,EAAE,SAAS,IAAI,CAAC;yEACnC,EAAE,qBAAqB,SAAS,IAAI,EAAE;;;cAGjG,EAAE,SAAS,WAAW,GAAG,CAAC,uDAAuD,EAAE,SAAS,WAAW,CAAC,IAAI,CAAC,GAAG,GAAG;cACnH,EAAE,SAAS,MAAM,GAAG,CAAC,iEAAiE,EAAE,eAAe,SAAS,MAAM,EAAE,WAAW,EAAE,eAAe,SAAS,MAAM,EAAE,iFAAiF,EAAE,eAAe,SAAS,MAAM,EAAE,MAAM,CAAC,GAAG,GAAG;;UAEzS,CAAC,EACA,KAAK,CAAC,IAAI,OAAO;YACtB;YAEA,MAAM,oBAAoB;gBACxB,IAAI,IAAI,OAAO,EAAE;oBACf,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;gBACzC;YACF;YAEA,MAAM,oBAAoB;gBACxB,IAAI,IAAI,OAAO,EAAE;oBACf,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;gBACzC;YACF;YAEA,qBAAqB;YACrB,IAAI,OAAO,CAAC,EAAE,CAAC,SAAS,SAAS;YACjC,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,SAAS;YACtC,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,SAAS;YAEtC,6BAA6B;YAC5B,IAAI,OAAO,CAAS,eAAe,GAAG;gBACrC,OAAO;gBACP,YAAY;gBACZ,YAAY;YACd;QACF;QAEA;QAEA,OAAO;YACL,IAAI,IAAI,OAAO,EAAE;gBACf,MAAM,WAAW,AAAC,IAAI,OAAO,CAAS,eAAe;gBACrD,IAAI,UAAU;oBACZ,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,SAAS,SAAS,KAAK;oBAChD,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,SAAS,SAAS,UAAU;oBAC1D,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,SAAS,SAAS,UAAU;oBAC1D,OAAO,AAAC,IAAI,OAAO,CAAS,eAAe;gBAC7C;gBACA,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;oBACjC,IAAI,OAAO,CAAC,WAAW,CAAC;gBAC1B;gBACA,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,WAAW;oBACnC,IAAI,OAAO,CAAC,YAAY,CAAC;gBAC3B;YACF;QACF;IACF,GAAG;QAAC;QAAW;QAAW;QAAc;QAAkB;KAAiB;IAE3E,aAAa;IACb,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW;QAE9C,MAAM,UAAU;QAEhB,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU;YAClC,IAAI,OAAO,CAAC,WAAW,CAAC;YACxB,IAAI,OAAO,CAAC,YAAY,CAAC;QAC3B;QAEA,IAAI,OAAO,CAAC,SAAS,CAAC,SAAS;YAC7B,MAAM;YACN,MAAM;gBACJ,MAAM;gBACN,YAAY,CAAC;gBACb,UAAU;oBACR,MAAM;oBACN,aAAa;gBACf;YACF;QACF;QAEA,IAAI,OAAO,CAAC,QAAQ,CAAC;YACnB,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,QAAQ;gBACN,aAAa;gBACb,YAAY;YACd;YACA,OAAO;gBACL,cAAc,+HAAK,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI;gBACtC,cAAc;oBACZ;oBACA;wBAAC;qBAAS;oBACV;wBAAC;qBAAO;oBACR;oBAAI;oBACJ;oBAAI;oBACJ;oBAAI;iBACL;gBACD,gBAAgB;YAClB;QACF;QAEA,6CAA6C;QAC7C,IAAI,OAAO,CAAC,QAAQ,CAAC;YACnB,IAAI,GAAG,QAAQ,QAAQ,CAAC;YACxB,MAAM;YACN,QAAQ;YACR,QAAQ;gBACN,aAAa;gBACb,YAAY;YACd;YACA,OAAO;gBACL,cAAc;gBACd,cAAc;oBACZ;oBACA;wBAAC;qBAAS;oBACV;wBAAC;qBAAO;oBACR;oBAAI;oBACJ;oBAAI;oBACJ;oBAAI;iBACL;gBACD,gBAAgB;YAClB;QACF,GAAG,UAAU,qCAAqC;QAElD,uCAAuC;QACvC,IAAI,UAAU,MAAM,GAAG,GAAG;YACxB,MAAM,SAAS,UAAU,MAAM,CAC7B,CAAC,QAAQ,QAAU,OAAO,MAAM,CAAC,QACjC,IAAI,+JAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,EAAsB,SAAS,CAAC,EAAE;YAG1E,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ;gBAC5B,SAAS;oBAAE,KAAK;oBAAK,QAAQ;oBAAK,MAAM;oBAAK,OAAO;gBAAI;gBACxD,SAAS;gBACT,UAAU;YACZ;QACF;QAEA,OAAO;YACL,IAAI,IAAI,OAAO,EAAE;gBACf,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,QAAQ,CAAC,GAAG;oBAC9C,IAAI,OAAO,CAAC,WAAW,CAAC,GAAG,QAAQ,QAAQ,CAAC;gBAC9C;gBACA,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU;oBACjC,IAAI,OAAO,CAAC,WAAW,CAAC;gBAC1B;gBACA,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,UAAU;oBAClC,IAAI,OAAO,CAAC,YAAY,CAAC;gBAC3B;YACF;QACF;IACF,GAAG;QAAC;QAAW;KAAU;IAEzB,qBAAO,8OAAC;QAAI,KAAK;QAAc,WAAU;;;;;;AAC3C;AAEA,SAAS,mBAAmB,IAAkB;IAC5C,MAAM,WAAyC;QAC7C,MAAM;QACN,SAAS;QACT,UAAU;QACV,SAAS;QACT,QAAQ;QACR,YAAY;QACZ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;QACR,SAAS;QACT,SAAS;QACT,SAAS;QACT,QAAQ;QACR,SAAS;QACT,KAAK;QACL,MAAM;QACN,UAAU;IACZ;IACA,OAAO,QAAQ,CAAC,KAAK,IAAI;AAC3B;AAEA,SAAS,qBAAqB,IAAkB;IAC9C,MAAM,SAAuC;QAC3C,MAAM;QACN,SAAS;QACT,UAAU;QACV,SAAS;QACT,QAAQ;QACR,YAAY;QACZ,MAAM;QACN,aAAa;QACb,MAAM;QACN,UAAU;QACV,QAAQ;QACR,SAAS;QACT,SAAS;QACT,SAAS;QACT,QAAQ;QACR,SAAS;QACT,KAAK;QACL,MAAM;QACN,UAAU;IACZ;IACA,OAAO,MAAM,CAAC,KAAK,IAAI;AACzB;AAEA,SAAS,eAAe,MAAc;IACpC,MAAM,SAAiC;QACrC,MAAM,+HAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI;QAC/B,QAAQ,+HAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI;QAC/B,MAAM,+HAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI;IACjC;IACA,OAAO,MAAM,CAAC,OAAO,IAAI,+HAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI;AACjD;AAEA,SAAS,eAAe,MAAc;IACpC,MAAM,SAAiC;QACrC,MAAM;QACN,QAAQ;QACR,MAAM;IACR;IACA,OAAO,MAAM,CAAC,OAAO,IAAI;AAC3B"}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///C:/safetraveler/components/ui/FloorSelector.tsx"],"sourcesContent":["\"use client\";\r\n\r\ninterface FloorSelectorProps {\r\n  currentFloor: number;\r\n  floors: { level: number; name: string }[];\r\n  onFloorChange: (floor: number) => void;\r\n}\r\n\r\nexport default function FloorSelector({\r\n  currentFloor,\r\n  floors,\r\n  onFloorChange,\r\n}: FloorSelectorProps) {\r\n  return (\r\n    <div className=\"absolute top-4 left-4 bg-white rounded-lg shadow-lg overflow-hidden z-10\">\r\n      <div className=\"flex flex-col\">\r\n        {floors.map((floor) => (\r\n          <button\r\n            key={floor.level}\r\n            onClick={() => onFloorChange(floor.level)}\r\n            className={`px-4 py-3 text-sm font-medium transition-colors border-b last:border-b-0 ${\r\n              currentFloor === floor.level\r\n                ? \"bg-blue-600 text-white\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"font-bold\">{floor.level === 0 ? \"RDC\" : `Étage ${floor.level}`}</span>\r\n            </div>\r\n            <div className={`text-xs mt-1 whitespace-nowrap max-w-[150px] truncate ${\r\n              currentFloor === floor.level ? \"opacity-90\" : \"opacity-70\"\r\n            }`}>\r\n              {floor.name.split(\" - \")[1] || floor.name}\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,cAAc,EACpC,YAAY,EACZ,MAAM,EACN,aAAa,EACM;IACnB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;oBAEC,SAAS,IAAM,cAAc,MAAM,KAAK;oBACxC,WAAW,CAAC,yEAAyE,EACnF,iBAAiB,MAAM,KAAK,GACxB,2BACA,+CACJ;;sCAEF,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;0CAAa,MAAM,KAAK,KAAK,IAAI,QAAQ,CAAC,MAAM,EAAE,MAAM,KAAK,EAAE;;;;;;;;;;;sCAEjF,8OAAC;4BAAI,WAAW,CAAC,sDAAsD,EACrE,iBAAiB,MAAM,KAAK,GAAG,eAAe,cAC9C;sCACC,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,IAAI,MAAM,IAAI;;;;;;;mBAdtC,MAAM,KAAK;;;;;;;;;;;;;;;AAqB5B"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/safetraveler/lib/utils/mapbox-directions.ts"],"sourcesContent":["/**\r\n * Mapbox Directions API utility\r\n * Calculates routes between two points using Mapbox Directions API\r\n */\r\n\r\nexport interface MapboxDirectionsResponse {\r\n  routes: Array<{\r\n    geometry: {\r\n      coordinates: [number, number][];\r\n      type: string;\r\n    };\r\n    distance: number;\r\n    duration: number;\r\n    weight?: number;\r\n    weight_name?: string;\r\n    legs: Array<{\r\n      steps: Array<{\r\n        maneuver: {\r\n          type: string;\r\n          instruction: string;\r\n          location: [number, number];\r\n          modifier?: string;\r\n          bearing_after?: number;\r\n          bearing_before?: number;\r\n        };\r\n        distance: number;\r\n        duration: number;\r\n        geometry: {\r\n          coordinates: [number, number][];\r\n        };\r\n        mode?: string;\r\n        driving_side?: string;\r\n        name?: string;\r\n        ref?: string;\r\n        pronunciation?: string;\r\n        destinations?: string;\r\n        exits?: string;\r\n        rotary_name?: string;\r\n        rotary_pronunciation?: string;\r\n        intersections?: Array<{\r\n          location: [number, number];\r\n          bearings: number[];\r\n          classes?: string[];\r\n          entry: boolean[];\r\n          in?: number;\r\n          out?: number;\r\n          lanes?: Array<{\r\n            indications: string[];\r\n            valid: boolean;\r\n            valid_indication?: string;\r\n          }>;\r\n        }>;\r\n      }>;\r\n      distance: number;\r\n      duration: number;\r\n      summary?: string;\r\n    }>;\r\n  }>;\r\n  waypoints: Array<{\r\n    location: [number, number];\r\n    name?: string;\r\n    hint?: string;\r\n  }>;\r\n  code: string;\r\n  uuid?: string;\r\n}\r\n\r\nexport interface RouteInstructions {\r\n  instruction: string;\r\n  distance: number;\r\n  duration: number;\r\n  coordinates: [number, number][];\r\n  maneuver: string;\r\n}\r\n\r\nexport interface MapboxDirectionsOptions {\r\n  profile?: \"walking\" | \"driving\" | \"cycling\";\r\n  alternatives?: boolean;\r\n  steps?: boolean;\r\n  geometries?: \"geojson\" | \"polyline\" | \"polyline6\";\r\n  overview?: \"full\" | \"simplified\" | \"false\";\r\n  language?: string;\r\n  waypoints?: [number, number][];\r\n  radiuses?: number[];\r\n  bearings?: Array<[number, number]>;\r\n  continue_straight?: boolean;\r\n  annotations?: string[];\r\n  exclude?: string;\r\n  approaches?: string;\r\n  waypoint_names?: string[];\r\n  waypoint_targets?: Array<[number, number]>;\r\n  snapping_include_closures?: boolean;\r\n  snapping_include_ways?: string[];\r\n}\r\n\r\n/**\r\n * Get directions from Mapbox Directions API with advanced options\r\n */\r\nexport async function getMapboxDirections(\r\n  start: [number, number],\r\n  end: [number, number],\r\n  options: MapboxDirectionsOptions = {}\r\n): Promise<MapboxDirectionsResponse | null> {\r\n  const token = process.env.NEXT_PUBLIC_MAPBOX_TOKEN;\r\n  \r\n  if (!token) {\r\n    console.error(\"Mapbox token is missing\");\r\n    return null;\r\n  }\r\n\r\n  const {\r\n    profile = \"walking\",\r\n    alternatives = false,\r\n    steps = true,\r\n    geometries = \"geojson\",\r\n    overview = \"full\",\r\n    language = \"fr\",\r\n    waypoints,\r\n    radiuses,\r\n    bearings,\r\n    continue_straight = false,\r\n    annotations = [\"distance\", \"duration\"],\r\n    exclude,\r\n    approaches,\r\n    waypoint_names,\r\n    waypoint_targets,\r\n  } = options;\r\n\r\n  try {\r\n    // Build coordinates string with waypoints\r\n    let coordinates = `${start[0]},${start[1]}`;\r\n    const validWaypoints: [number, number][] = [];\r\n    \r\n    if (waypoints && Array.isArray(waypoints) && waypoints.length > 0) {\r\n      waypoints.forEach((waypoint) => {\r\n        if (waypoint && Array.isArray(waypoint) && waypoint.length === 2 && \r\n            typeof waypoint[0] === 'number' && typeof waypoint[1] === 'number') {\r\n          validWaypoints.push(waypoint);\r\n          coordinates += `;${waypoint[0]},${waypoint[1]}`;\r\n        }\r\n      });\r\n    }\r\n    coordinates += `;${end[0]},${end[1]}`;\r\n\r\n    // Build query parameters - only include supported parameters\r\n    const params = new URLSearchParams({\r\n      geometries,\r\n      steps: steps.toString(),\r\n      overview,\r\n      language,\r\n      alternatives: alternatives.toString(),\r\n      continue_straight: continue_straight.toString(),\r\n    });\r\n\r\n    // Add annotations only if provided and valid\r\n    if (annotations && annotations.length > 0) {\r\n      // Filter valid annotation types\r\n      const validAnnotations = annotations.filter(a => \r\n        [\"distance\", \"duration\", \"speed\", \"congestion\", \"congestion_numeric\"].includes(a)\r\n      );\r\n      if (validAnnotations.length > 0) {\r\n        params.append(\"annotations\", validAnnotations.join(\",\"));\r\n      }\r\n    }\r\n\r\n    // Add optional parameters only if they have valid values\r\n    const numCoords = 2 + validWaypoints.length;\r\n    \r\n    if (radiuses && Array.isArray(radiuses) && radiuses.length > 0) {\r\n      // Ensure we have the right number of radiuses (one per coordinate)\r\n      if (radiuses.length === numCoords) {\r\n        params.append(\"radiuses\", radiuses.join(\";\"));\r\n      }\r\n    }\r\n    \r\n    if (bearings && Array.isArray(bearings) && bearings.length > 0) {\r\n      if (bearings.length === numCoords) {\r\n        params.append(\"bearings\", bearings.map(b => `${b[0]},${b[1]}`).join(\";\"));\r\n      }\r\n    }\r\n    \r\n    if (exclude && typeof exclude === 'string') {\r\n      params.append(\"exclude\", exclude);\r\n    }\r\n    \r\n    if (approaches && typeof approaches === 'string') {\r\n      params.append(\"approaches\", approaches);\r\n    }\r\n    \r\n    if (waypoint_names && Array.isArray(waypoint_names) && waypoint_names.length > 0 && waypoint_names.length === validWaypoints.length) {\r\n      params.append(\"waypoint_names\", waypoint_names.join(\";\"));\r\n    }\r\n    \r\n    if (waypoint_targets && Array.isArray(waypoint_targets) && waypoint_targets.length > 0 && waypoint_targets.length === validWaypoints.length) {\r\n      params.append(\"waypoint_targets\", waypoint_targets.map(t => `${t[0]},${t[1]}`).join(\";\"));\r\n    }\r\n\r\n    // Note: snapping_include_closures and snapping_include_ways are not widely supported\r\n    // Removing them to avoid API errors\r\n\r\n    params.append(\"access_token\", token);\r\n\r\n    const url = `https://api.mapbox.com/directions/v5/mapbox/${profile}/${coordinates}?${params.toString()}`;\r\n\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Mapbox Directions API error: ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data as MapboxDirectionsResponse;\r\n  } catch (error) {\r\n    console.error(\"Error fetching directions:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Convert Mapbox Directions response to route path\r\n */\r\nexport function extractRoutePath(directions: MapboxDirectionsResponse): [number, number][] {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  return route.geometry.coordinates as [number, number][];\r\n}\r\n\r\n/**\r\n * Extract turn-by-turn instructions from Mapbox Directions response\r\n */\r\nexport function extractRouteInstructions(directions: MapboxDirectionsResponse): RouteInstructions[] {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  const instructions: RouteInstructions[] = [];\r\n\r\n  route.legs.forEach((leg) => {\r\n    leg.steps.forEach((step) => {\r\n      instructions.push({\r\n        instruction: step.maneuver.instruction,\r\n        distance: step.distance,\r\n        duration: step.duration,\r\n        coordinates: step.geometry.coordinates as [number, number][],\r\n        maneuver: step.maneuver.type,\r\n      });\r\n    });\r\n  });\r\n\r\n  return instructions;\r\n}\r\n\r\n/**\r\n * Get route summary (distance and duration)\r\n */\r\nexport function getRouteSummary(directions: MapboxDirectionsResponse): {\r\n  distance: number;\r\n  duration: number;\r\n  weight?: number;\r\n  weight_name?: string;\r\n} {\r\n  if (!directions.routes || directions.routes.length === 0) {\r\n    return { distance: 0, duration: 0 };\r\n  }\r\n\r\n  const route = directions.routes[0];\r\n  return {\r\n    distance: route.distance,\r\n    duration: Math.round(route.duration / 60), // Convert seconds to minutes\r\n    weight: route.weight,\r\n    weight_name: route.weight_name,\r\n  };\r\n}\r\n\r\n/**\r\n * Get alternative routes if available\r\n */\r\nexport function getAlternativeRoutes(directions: MapboxDirectionsResponse): Array<{\r\n  path: [number, number][];\r\n  distance: number;\r\n  duration: number;\r\n}> {\r\n  if (!directions.routes || directions.routes.length <= 1) {\r\n    return [];\r\n  }\r\n\r\n  return directions.routes.slice(1).map((route) => ({\r\n    path: route.geometry.coordinates as [number, number][],\r\n    distance: route.distance,\r\n    duration: Math.round(route.duration / 60),\r\n  }));\r\n}\r\n\r\n/**\r\n * Find intermediate waypoints for better routing in airport context\r\n * This helps route through key areas like security checkpoints, elevators, etc.\r\n */\r\nexport function findIntermediateWaypoints(\r\n  start: [number, number],\r\n  end: [number, number],\r\n  locations: Array<{ coordinates: [number, number]; type: string; floor: number }>,\r\n  currentFloor: number\r\n): [number, number][] {\r\n  const waypoints: Array<{ coordinates: [number, number]; priority: number; distance: number }> = [];\r\n  \r\n  // Filter locations on the same floor\r\n  const floorLocations = locations.filter((loc) => loc.floor === currentFloor);\r\n  \r\n  // Key waypoint types for airport navigation with priorities\r\n  const keyTypes: Record<string, number> = {\r\n    security: 3, // High priority - must pass through\r\n    elevator: 2, // Medium-high priority\r\n    escalator: 2, // Medium-high priority\r\n    information: 1, // Medium priority\r\n    entrance: 1, // Medium priority\r\n    exit: 1, // Medium priority\r\n  };\r\n  \r\n  // Find key locations between start and end\r\n  const startX = start[0];\r\n  const startY = start[1];\r\n  const endX = end[0];\r\n  const endY = end[1];\r\n  \r\n  // Calculate distance from start to end\r\n  const totalDistance = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));\r\n  \r\n  // Find locations that are roughly between start and end\r\n  floorLocations.forEach((loc) => {\r\n    const priority = keyTypes[loc.type];\r\n    if (priority) {\r\n      const locX = loc.coordinates[0];\r\n      const locY = loc.coordinates[1];\r\n      \r\n      // Calculate distance from start\r\n      const distFromStart = Math.sqrt(Math.pow(locX - startX, 2) + Math.pow(locY - startY, 2));\r\n      \r\n      // Check if location is roughly between start and end (within 120% of direct distance)\r\n      const isReasonable = distFromStart <= totalDistance * 1.2;\r\n      \r\n      // Check if location is roughly in the direction of the destination\r\n      const directionToEnd = Math.atan2(endY - startY, endX - startX);\r\n      const directionToLoc = Math.atan2(locY - startY, locX - startX);\r\n      const angleDiff = Math.abs(directionToEnd - directionToLoc);\r\n      const isInDirection = angleDiff < Math.PI / 3; // Within 60 degrees\r\n      \r\n      if (isReasonable && isInDirection) {\r\n        waypoints.push({\r\n          coordinates: loc.coordinates,\r\n          priority,\r\n          distance: distFromStart,\r\n        });\r\n      }\r\n    }\r\n  });\r\n  \r\n  // Sort by priority (higher first), then by distance (closer first)\r\n  waypoints.sort((a, b) => {\r\n    if (b.priority !== a.priority) {\r\n      return b.priority - a.priority;\r\n    }\r\n    return a.distance - b.distance;\r\n  });\r\n  \r\n  // Limit to 2-3 waypoints to avoid too complex routes\r\n  // Only include high priority waypoints if they exist\r\n  const highPriorityWaypoints = waypoints.filter((w) => w.priority >= 2);\r\n  if (highPriorityWaypoints.length > 0) {\r\n    return highPriorityWaypoints.slice(0, 2).map((w) => w.coordinates);\r\n  }\r\n  \r\n  return waypoints.slice(0, 2).map((w) => w.coordinates);\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AA+FM,eAAe,oBACpB,KAAuB,EACvB,GAAqB,EACrB,UAAmC,CAAC,CAAC;IAErC,MAAM;IAEN;;IAKA,MAAM,EACJ,UAAU,SAAS,EACnB,eAAe,KAAK,EACpB,QAAQ,IAAI,EACZ,aAAa,SAAS,EACtB,WAAW,MAAM,EACjB,WAAW,IAAI,EACf,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,oBAAoB,KAAK,EACzB,cAAc;QAAC;QAAY;KAAW,EACtC,OAAO,EACP,UAAU,EACV,cAAc,EACd,gBAAgB,EACjB,GAAG;IAEJ,IAAI;QACF,0CAA0C;QAC1C,IAAI,cAAc,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE;QAC3C,MAAM,iBAAqC,EAAE;QAE7C,IAAI,aAAa,MAAM,OAAO,CAAC,cAAc,UAAU,MAAM,GAAG,GAAG;YACjE,UAAU,OAAO,CAAC,CAAC;gBACjB,IAAI,YAAY,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,KAAK,KAC3D,OAAO,QAAQ,CAAC,EAAE,KAAK,YAAY,OAAO,QAAQ,CAAC,EAAE,KAAK,UAAU;oBACtE,eAAe,IAAI,CAAC;oBACpB,eAAe,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,EAAE;gBACjD;YACF;QACF;QACA,eAAe,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE;QAErC,6DAA6D;QAC7D,MAAM,SAAS,IAAI,gBAAgB;YACjC;YACA,OAAO,MAAM,QAAQ;YACrB;YACA;YACA,cAAc,aAAa,QAAQ;YACnC,mBAAmB,kBAAkB,QAAQ;QAC/C;QAEA,6CAA6C;QAC7C,IAAI,eAAe,YAAY,MAAM,GAAG,GAAG;YACzC,gCAAgC;YAChC,MAAM,mBAAmB,YAAY,MAAM,CAAC,CAAA,IAC1C;oBAAC;oBAAY;oBAAY;oBAAS;oBAAc;iBAAqB,CAAC,QAAQ,CAAC;YAEjF,IAAI,iBAAiB,MAAM,GAAG,GAAG;gBAC/B,OAAO,MAAM,CAAC,eAAe,iBAAiB,IAAI,CAAC;YACrD;QACF;QAEA,yDAAyD;QACzD,MAAM,YAAY,IAAI,eAAe,MAAM;QAE3C,IAAI,YAAY,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,GAAG,GAAG;YAC9D,mEAAmE;YACnE,IAAI,SAAS,MAAM,KAAK,WAAW;gBACjC,OAAO,MAAM,CAAC,YAAY,SAAS,IAAI,CAAC;YAC1C;QACF;QAEA,IAAI,YAAY,MAAM,OAAO,CAAC,aAAa,SAAS,MAAM,GAAG,GAAG;YAC9D,IAAI,SAAS,MAAM,KAAK,WAAW;gBACjC,OAAO,MAAM,CAAC,YAAY,SAAS,GAAG,CAAC,CAAA,IAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC;YACtE;QACF;QAEA,IAAI,WAAW,OAAO,YAAY,UAAU;YAC1C,OAAO,MAAM,CAAC,WAAW;QAC3B;QAEA,IAAI,cAAc,OAAO,eAAe,UAAU;YAChD,OAAO,MAAM,CAAC,cAAc;QAC9B;QAEA,IAAI,kBAAkB,MAAM,OAAO,CAAC,mBAAmB,eAAe,MAAM,GAAG,KAAK,eAAe,MAAM,KAAK,eAAe,MAAM,EAAE;YACnI,OAAO,MAAM,CAAC,kBAAkB,eAAe,IAAI,CAAC;QACtD;QAEA,IAAI,oBAAoB,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,MAAM,GAAG,KAAK,iBAAiB,MAAM,KAAK,eAAe,MAAM,EAAE;YAC3I,OAAO,MAAM,CAAC,oBAAoB,iBAAiB,GAAG,CAAC,CAAA,IAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC;QACtF;QAEA,qFAAqF;QACrF,oCAAoC;QAEpC,OAAO,MAAM,CAAC,gBAAgB;QAE9B,MAAM,MAAM,CAAC,4CAA4C,EAAE,QAAQ,CAAC,EAAE,YAAY,CAAC,EAAE,OAAO,QAAQ,IAAI;QAExG,MAAM,WAAW,MAAM,MAAM;QAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,SAAS,UAAU,CAAC,GAAG,EAAE,WAAW;QACtF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;IACT;AACF;AAKO,SAAS,iBAAiB,UAAoC;IACnE,IAAI,CAAC,WAAW,MAAM,IAAI,WAAW,MAAM,CAAC,MAAM,KAAK,GAAG;QACxD,OAAO,EAAE;IACX;IAEA,MAAM,QAAQ,WAAW,MAAM,CAAC,EAAE;IAClC,OAAO,MAAM,QAAQ,CAAC,WAAW;AACnC;AAKO,SAAS,yBAAyB,UAAoC;IAC3E,IAAI,CAAC,WAAW,MAAM,IAAI,WAAW,MAAM,CAAC,MAAM,KAAK,GAAG;QACxD,OAAO,EAAE;IACX;IAEA,MAAM,QAAQ,WAAW,MAAM,CAAC,EAAE;IAClC,MAAM,eAAoC,EAAE;IAE5C,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC;QAClB,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;YACjB,aAAa,IAAI,CAAC;gBAChB,aAAa,KAAK,QAAQ,CAAC,WAAW;gBACtC,UAAU,KAAK,QAAQ;gBACvB,UAAU,KAAK,QAAQ;gBACvB,aAAa,KAAK,QAAQ,CAAC,WAAW;gBACtC,UAAU,KAAK,QAAQ,CAAC,IAAI;YAC9B;QACF;IACF;IAEA,OAAO;AACT;AAKO,SAAS,gBAAgB,UAAoC;IAMlE,IAAI,CAAC,WAAW,MAAM,IAAI,WAAW,MAAM,CAAC,MAAM,KAAK,GAAG;QACxD,OAAO;YAAE,UAAU;YAAG,UAAU;QAAE;IACpC;IAEA,MAAM,QAAQ,WAAW,MAAM,CAAC,EAAE;IAClC,OAAO;QACL,UAAU,MAAM,QAAQ;QACxB,UAAU,KAAK,KAAK,CAAC,MAAM,QAAQ,GAAG;QACtC,QAAQ,MAAM,MAAM;QACpB,aAAa,MAAM,WAAW;IAChC;AACF;AAKO,SAAS,qBAAqB,UAAoC;IAKvE,IAAI,CAAC,WAAW,MAAM,IAAI,WAAW,MAAM,CAAC,MAAM,IAAI,GAAG;QACvD,OAAO,EAAE;IACX;IAEA,OAAO,WAAW,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,QAAU,CAAC;YAChD,MAAM,MAAM,QAAQ,CAAC,WAAW;YAChC,UAAU,MAAM,QAAQ;YACxB,UAAU,KAAK,KAAK,CAAC,MAAM,QAAQ,GAAG;QACxC,CAAC;AACH;AAMO,SAAS,0BACd,KAAuB,EACvB,GAAqB,EACrB,SAAgF,EAChF,YAAoB;IAEpB,MAAM,YAA0F,EAAE;IAElG,qCAAqC;IACrC,MAAM,iBAAiB,UAAU,MAAM,CAAC,CAAC,MAAQ,IAAI,KAAK,KAAK;IAE/D,4DAA4D;IAC5D,MAAM,WAAmC;QACvC,UAAU;QACV,UAAU;QACV,WAAW;QACX,aAAa;QACb,UAAU;QACV,MAAM;IACR;IAEA,2CAA2C;IAC3C,MAAM,SAAS,KAAK,CAAC,EAAE;IACvB,MAAM,SAAS,KAAK,CAAC,EAAE;IACvB,MAAM,OAAO,GAAG,CAAC,EAAE;IACnB,MAAM,OAAO,GAAG,CAAC,EAAE;IAEnB,uCAAuC;IACvC,MAAM,gBAAgB,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,QAAQ,KAAK,KAAK,GAAG,CAAC,OAAO,QAAQ;IAErF,wDAAwD;IACxD,eAAe,OAAO,CAAC,CAAC;QACtB,MAAM,WAAW,QAAQ,CAAC,IAAI,IAAI,CAAC;QACnC,IAAI,UAAU;YACZ,MAAM,OAAO,IAAI,WAAW,CAAC,EAAE;YAC/B,MAAM,OAAO,IAAI,WAAW,CAAC,EAAE;YAE/B,gCAAgC;YAChC,MAAM,gBAAgB,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,QAAQ,KAAK,KAAK,GAAG,CAAC,OAAO,QAAQ;YAErF,sFAAsF;YACtF,MAAM,eAAe,iBAAiB,gBAAgB;YAEtD,mEAAmE;YACnE,MAAM,iBAAiB,KAAK,KAAK,CAAC,OAAO,QAAQ,OAAO;YACxD,MAAM,iBAAiB,KAAK,KAAK,CAAC,OAAO,QAAQ,OAAO;YACxD,MAAM,YAAY,KAAK,GAAG,CAAC,iBAAiB;YAC5C,MAAM,gBAAgB,YAAY,KAAK,EAAE,GAAG,GAAG,oBAAoB;YAEnE,IAAI,gBAAgB,eAAe;gBACjC,UAAU,IAAI,CAAC;oBACb,aAAa,IAAI,WAAW;oBAC5B;oBACA,UAAU;gBACZ;YACF;QACF;IACF;IAEA,mEAAmE;IACnE,UAAU,IAAI,CAAC,CAAC,GAAG;QACjB,IAAI,EAAE,QAAQ,KAAK,EAAE,QAAQ,EAAE;YAC7B,OAAO,EAAE,QAAQ,GAAG,EAAE,QAAQ;QAChC;QACA,OAAO,EAAE,QAAQ,GAAG,EAAE,QAAQ;IAChC;IAEA,qDAAqD;IACrD,qDAAqD;IACrD,MAAM,wBAAwB,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,IAAI;IACpE,IAAI,sBAAsB,MAAM,GAAG,GAAG;QACpC,OAAO,sBAAsB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAM,EAAE,WAAW;IACnE;IAEA,OAAO,UAAU,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAM,EAAE,WAAW;AACvD"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///C:/safetraveler/app/navigation/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { ChevronDown, Loader2, MapPin, Clock } from \"lucide-react\";\r\nimport { Location } from \"@/lib/types\";\r\nimport airportData from \"@/lib/data/airport-data.json\";\r\nimport { theme } from \"@/lib/config/theme\";\r\nimport { useLocale } from \"@/lib/context/LocaleContext\";\r\nimport EnhancedAirportMap from \"@/components/map/EnhancedAirportMap\";\r\nimport FloorSelector from \"@/components/ui/FloorSelector\";\r\nimport {\r\n  getMapboxDirections,\r\n  extractRoutePath,\r\n  extractRouteInstructions,\r\n  getRouteSummary,\r\n  getAlternativeRoutes,\r\n  findIntermediateWaypoints,\r\n  RouteInstructions,\r\n} from \"@/lib/utils/mapbox-directions\";\r\n\r\nexport default function NavigationPage() {\r\n  const { t, locale } = useLocale();\r\n  const [locations, setLocations] = useState<Location[]>([]);\r\n  const [floors, setFloors] = useState<{ level: number; name: string }[]>([]);\r\n  const [currentFloor, setCurrentFloor] = useState(0);\r\n  const [startLocation, setStartLocation] = useState<string>(\"\");\r\n  const [endLocation, setEndLocation] = useState<string>(\"\");\r\n  const [route, setRoute] = useState<[number, number][] | undefined>();\r\n  const [selectedLocation, setSelectedLocation] = useState<string | undefined>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [routeInstructions, setRouteInstructions] = useState<RouteInstructions[]>([]);\r\n  const [routeSummary, setRouteSummary] = useState<{ distance: number; duration: number } | null>(null);\r\n\r\n  useEffect(() => {\r\n    setLocations(airportData.locations as Location[]);\r\n    setFloors(airportData.floors);\r\n  }, []);\r\n\r\n  const handleCalculateRoute = async () => {\r\n    if (!startLocation || !endLocation) {\r\n      return;\r\n    }\r\n\r\n    const start = locations.find((loc) => loc.id === startLocation);\r\n    const end = locations.find((loc) => loc.id === endLocation);\r\n\r\n    if (!start || !end) return;\r\n\r\n    setIsLoading(true);\r\n    setRoute(undefined);\r\n    setRouteInstructions([]);\r\n    setRouteSummary(null);\r\n\r\n    try {\r\n      // Find intermediate waypoints for better routing in airport context\r\n      const waypoints = findIntermediateWaypoints(\r\n        start.coordinates as [number, number],\r\n        end.coordinates as [number, number],\r\n        locations.map((loc) => ({\r\n          coordinates: loc.coordinates as [number, number],\r\n          type: loc.type,\r\n          floor: loc.floor,\r\n        })),\r\n        start.floor\r\n      );\r\n\r\n      // Use Mapbox Directions API with advanced options for better routing\r\n      const directions = await getMapboxDirections(\r\n        start.coordinates as [number, number],\r\n        end.coordinates as [number, number],\r\n        {\r\n          profile: \"walking\",\r\n          alternatives: true, // Get alternative routes\r\n          steps: true,\r\n          geometries: \"geojson\",\r\n          overview: \"full\", // Full geometry for better visualization\r\n          language: locale === \"ewe\" ? \"en\" : locale, // Mapbox supports fr, en, etc. but not ewe, so use en as fallback\r\n          waypoints: waypoints.length > 0 ? waypoints : undefined, // Only include if we have waypoints\r\n          annotations: [\"distance\", \"duration\"], // Get detailed annotations (removed speed as it may not be supported for walking)\r\n          continue_straight: false, // Allow route optimization\r\n        }\r\n      );\r\n\r\n      if (directions) {\r\n        const routePath = extractRoutePath(directions);\r\n        const instructions = extractRouteInstructions(directions);\r\n        const summary = getRouteSummary(directions);\r\n        const alternatives = getAlternativeRoutes(directions);\r\n\r\n        setRoute(routePath);\r\n        setRouteInstructions(instructions);\r\n        setRouteSummary(summary);\r\n        setCurrentFloor(start.floor);\r\n\r\n        // Log alternative routes for future use\r\n        if (alternatives.length > 0) {\r\n          console.log(`Found ${alternatives.length} alternative route(s)`);\r\n        }\r\n\r\n        // Fit map to route bounds if needed\r\n        if (routePath.length > 0) {\r\n          // The map will automatically fit to the route\r\n        }\r\n      } else {\r\n        // Fallback to simple route if Mapbox API fails\r\n        const simpleRoute: [number, number][] = [\r\n          start.coordinates as [number, number],\r\n          end.coordinates as [number, number],\r\n        ];\r\n        setRoute(simpleRoute);\r\n        setCurrentFloor(start.floor);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error calculating route:\", error);\r\n      // Fallback to simple route\r\n      const startLoc = locations.find((loc) => loc.id === startLocation);\r\n      const endLoc = locations.find((loc) => loc.id === endLocation);\r\n      if (startLoc && endLoc) {\r\n        const simpleRoute: [number, number][] = [\r\n          startLoc.coordinates as [number, number],\r\n          endLoc.coordinates as [number, number],\r\n        ];\r\n        setRoute(simpleRoute);\r\n        setCurrentFloor(startLoc.floor);\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Group locations by type for dropdown\r\n  const groupedLocations = locations.reduce((acc, loc) => {\r\n    if (!acc[loc.type]) {\r\n      acc[loc.type] = [];\r\n    }\r\n    acc[loc.type].push(loc);\r\n    return acc;\r\n  }, {} as Record<string, Location[]>);\r\n\r\n  const locationTypeLabels: Record<string, string> = {\r\n    gate: t(\"map.locationTypes.gate\"),\r\n    checkin: t(\"map.locationTypes.checkin\"),\r\n    security: t(\"map.locationTypes.security\"),\r\n    toilet: t(\"map.locationTypes.toilet\"),\r\n    restaurant: t(\"map.locationTypes.restaurant\"),\r\n    shop: t(\"map.locationTypes.shop\"),\r\n    information: t(\"map.locationTypes.information\"),\r\n    lounge: t(\"map.locationTypes.lounge\"),\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\" style={{ backgroundColor: theme.colors.background.default }}>\r\n      {/* Left Panel - Navigation */}\r\n      <div\r\n        className=\"w-full md:w-80 lg:w-72 flex-shrink-0 overflow-y-auto\"\r\n        style={{ backgroundColor: \"#ffffff\" }}\r\n      >\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Title */}\r\n          <div>\r\n            <h1\r\n              className=\"font-bold mb-2\"\r\n              style={{\r\n                fontSize: \"28px\",\r\n                fontWeight: 700,\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              {t(\"navigation.title\")}\r\n            </h1>\r\n            <p\r\n              className=\"text-sm\"\r\n              style={{\r\n                color: theme.colors.text.secondary,\r\n              }}\r\n            >\r\n              {t(\"navigation.calculateItinerary\")}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Starting Point */}\r\n          <div>\r\n            <label\r\n              className=\"block text-sm font-medium mb-2\"\r\n              style={{\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              {t(\"navigation.startingPoint\")}\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={startLocation}\r\n                onChange={(e) => {\r\n                  setStartLocation(e.target.value);\r\n                  setSelectedLocation(e.target.value);\r\n                }}\r\n                className=\"w-full appearance-none rounded-lg border px-4 py-3 pr-10 text-sm transition-all focus:outline-none focus:ring-2\"\r\n                style={{\r\n                  backgroundColor: \"#ffffff\",\r\n                  borderColor: theme.colors.border.main,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n              >\r\n                <option value=\"\">{t(\"navigation.selectPlaceholder\")}</option>\r\n                {Object.entries(groupedLocations).map(([type, locs]) => (\r\n                  <optgroup key={type} label={locationTypeLabels[type] || type}>\r\n                    {locs.map((loc) => (\r\n                      <option key={loc.id} value={loc.id}>\r\n                        {loc.name}\r\n                      </option>\r\n                    ))}\r\n                  </optgroup>\r\n                ))}\r\n              </select>\r\n              <ChevronDown\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none w-5 h-5\"\r\n                style={{ color: theme.colors.text.secondary }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Destination */}\r\n          <div>\r\n            <label\r\n              className=\"block text-sm font-medium mb-2\"\r\n              style={{\r\n                color: theme.colors.text.primary,\r\n              }}\r\n            >\r\n              {t(\"navigation.destination\")}\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                value={endLocation}\r\n                onChange={(e) => {\r\n                  setEndLocation(e.target.value);\r\n                  setSelectedLocation(e.target.value);\r\n                }}\r\n                className=\"w-full appearance-none rounded-lg border px-4 py-3 pr-10 text-sm transition-all focus:outline-none focus:ring-2\"\r\n                style={{\r\n                  backgroundColor: \"#ffffff\",\r\n                  borderColor: theme.colors.border.main,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n              >\r\n                <option value=\"\">{t(\"navigation.selectPlaceholder\")}</option>\r\n                {Object.entries(groupedLocations).map(([type, locs]) => (\r\n                  <optgroup key={type} label={locationTypeLabels[type] || type}>\r\n                    {locs.map((loc) => (\r\n                      <option key={loc.id} value={loc.id}>\r\n                        {loc.name}\r\n                      </option>\r\n                    ))}\r\n                  </optgroup>\r\n                ))}\r\n              </select>\r\n              <ChevronDown\r\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none w-5 h-5\"\r\n                style={{ color: theme.colors.text.secondary }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Calculate Button */}\r\n          <button\r\n            onClick={handleCalculateRoute}\r\n            className=\"w-full rounded-lg font-semibold transition-all py-3 text-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            style={{\r\n              backgroundColor: startLocation && endLocation ? theme.colors.accent.main : theme.colors.gray[300],\r\n              color: startLocation && endLocation ? theme.colors.accent.contrast : theme.colors.text.primary,\r\n              boxShadow: theme.shadow.sm,\r\n            }}\r\n            disabled={!startLocation || !endLocation || isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <>\r\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                {t(\"navigation.calculating\")}\r\n              </>\r\n            ) : (\r\n              t(\"navigation.calculateRoute\")\r\n            )}\r\n          </button>\r\n\r\n          {/* Route Summary */}\r\n          {routeSummary && route && (\r\n            <div\r\n              className=\"rounded-lg p-4 space-y-3\"\r\n              style={{\r\n                backgroundColor: theme.colors.background.elevated,\r\n                border: `1px solid ${theme.colors.border.main}`,\r\n              }}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin className=\"w-4 h-4\" style={{ color: theme.colors.accent.main }} />\r\n                  <span className=\"text-sm font-semibold\" style={{ color: theme.colors.text.primary }}>\r\n                    {(routeSummary.distance / 1000).toFixed(2)} km\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Clock className=\"w-4 h-4\" style={{ color: theme.colors.accent.main }} />\r\n                  <span className=\"text-sm font-semibold\" style={{ color: theme.colors.text.primary }}>\r\n                    ~{routeSummary.duration} min\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Route Instructions */}\r\n          {routeInstructions.length > 0 && (\r\n            <div className=\"space-y-2\">\r\n              <h3\r\n                className=\"text-sm font-semibold\"\r\n                style={{ color: theme.colors.text.primary }}\r\n              >\r\n                {t(\"navigation.navigationInstructions\")}\r\n              </h3>\r\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {routeInstructions.map((instruction, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"rounded-lg p-3 text-xs\"\r\n                    style={{\r\n                      backgroundColor: theme.colors.background.elevated,\r\n                      border: `1px solid ${theme.colors.border.main}`,\r\n                    }}\r\n                  >\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <span\r\n                        className=\"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold\"\r\n                        style={{\r\n                          backgroundColor: theme.colors.accent.main,\r\n                          color: theme.colors.accent.contrast,\r\n                        }}\r\n                      >\r\n                        {index + 1}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        <p style={{ color: theme.colors.text.primary }}>\r\n                          {instruction.instruction}\r\n                        </p>\r\n                        {instruction.distance > 0 && (\r\n                          <p className=\"mt-1\" style={{ color: theme.colors.text.secondary }}>\r\n                            {(instruction.distance / 1000).toFixed(2)} km\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Right Panel - Map */}\r\n      <div className=\"flex-1 relative\" style={{ backgroundColor: theme.colors.background.default }}>\r\n        <EnhancedAirportMap\r\n          locations={locations}\r\n          selectedLocation={selectedLocation}\r\n          onLocationSelect={setSelectedLocation}\r\n          showRoute={route}\r\n          currentFloor={currentFloor}\r\n        />\r\n        <FloorSelector\r\n          currentFloor={currentFloor}\r\n          floors={floors}\r\n          onFloorChange={(floor) => {\r\n            setCurrentFloor(floor);\r\n            // Filter locations by floor when floor changes\r\n            const floorLoc = locations.find((loc) => loc.floor === floor);\r\n            if (floorLoc && (startLocation || endLocation)) {\r\n              // Keep selection if location exists on new floor\r\n              const start = locations.find((loc) => loc.id === startLocation);\r\n              const end = locations.find((loc) => loc.id === endLocation);\r\n              if (start && start.floor !== floor) setStartLocation(\"\");\r\n              if (end && end.floor !== floor) setEndLocation(\"\");\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}